<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Camping Interface</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body {
            margin: 0;
            height: 95vh;
            background-color: whitesmoke;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px 0;
        }

        .message-container {
            width: 1500px;
            padding: 15px;
            margin-bottom: 20px;
            border: 1px solid #9A7E6F;
            border-radius: 10px;
            background-color: #E9EED9;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            display: none;
        }

        .message {
            font-size: 24px;
            color: #54473F;
            text-align: center;
            margin: 0;
        }

        .container {
            width: 1500px;
            height: 800px;
            padding: 20px;
            border: 1px solid #9A7E6F;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-color: #E9EED9;
            position: relative;
            overflow: hidden;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .title {
            font-size: 40px;
            color: #54473F;
        }

        .intro {
            font-size: 25px;
            width: 70%;
            color: #54473F;
            margin:auto;
        }

        .controls-container {
            display: none;
        }

        .start-button {
            font-size: 26px;
            font-weight: bold;
            text-align: center;
            border: 1px solid #9A7E6F;
            border-radius: 8px;
            padding: 15px 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #9A7E6F;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .start-button:hover {
            background-color: #826a5d;
        }

        .photo-grid {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(3, 1fr);
            gap: 2px;
            display: none;
        }

        .gridDiv {
            border-radius: 8px;
            border: 10px solid #54473F;
            width: 99%;
            height: 98%;
            z-index: 2;
            position: absolute;
            top: 0;
            left: 0;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(3, 1fr);
            text-align: center;
        }

        .gridDiv > div {
            transition: border 0.2s ease;
            position: relative;
        }

        .gridDiv > .steak:hover {
            border: 15px solid #54473F;
        }

        .gridDiv > .steak > span {
            visibility: hidden;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(84, 71, 63, 0.8);
            color: white;
            padding: 10px 15px;
            border-radius: 5px;
            font-size: 16px;
            white-space: nowrap;
            z-index: 3;
        }

        .gridDiv > div:hover > span {
            visibility: visible;
        }

        .controls-container {
            display: none;
            position: fixed;
            right: 30px;
            top: 50%;
            transform: translateY(-50%);
            width: 320px;
            gap: 20px;
            flex-direction: column;
            z-index: 1000;
        }

        .control-card {
            background: white;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
            border: 1px solid rgba(154, 126, 111, 0.1);
            transition: all 0.3s ease;
        }

        .control-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }

        .card-title {
            font-size: 16px;
            font-weight: bold;
            color: #54473F;
            margin-bottom: 15px;
            text-align: center;
            border-bottom: 2px solid #E9EED9;
            padding-bottom: 10px;
        }

        .card-buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .control-button {
            background: linear-gradient(135deg, #9A7E6F 0%, #826a5d 100%);
            color: white;
            border: none;
            padding: 12px 18px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 120px;
            position: relative;
            overflow: hidden;
        }

        .control-button:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .control-button:hover:before {
            left: 100%;
        }

        .control-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(154, 126, 111, 0.4);
        }

        .control-button:active {
            transform: translateY(0);
            box-shadow: 0 4px 15px rgba(154, 126, 111, 0.3);
        }

        .display-card {
            background: linear-gradient(135deg, #E9EED9 0%, #f0f5db 100%);
            border: 2px solid #9A7E6F;
        }

        .display-value {
            font-size: 18px;
            font-weight: bold;
            color: #54473F;
            text-align: center;
            padding: 10px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 8px;
            margin-top: 10px;
        }

        .next-pole-card {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            border: none;
        }

        .next-pole-card .card-title {
            color: white;
            border-bottom-color: rgba(255, 255, 255, 0.3);
        }

        .next-pole-card .control-button {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .next-pole-card .control-button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .modDiv{
            border: 1px solid red;
            position: absolute;
            top:50px;
            left:50px;
        }

        .modButton{
            position: absolute;
            top:70px;
            left:50px;
            width:50px;
            height: 50px;
        }

        .weather-box {
                position: fixed;
                left: 20px;
                top: 300px;
                width: 250px;
                background-color: #E9EED9;
                border: 1px solid #9A7E6F;
                border-radius: 10px;
                padding: 20px;
                box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
                z-index: 1000;
                font-family: Arial, sans-serif;
                text-align: center;
            }

        .time-display {
            font-size: 24px;
            font-weight: bold;
            color: #54473F;
            margin-bottom: 10px;
        }

        .temperature-display {
            font-size: 20px;
            color: #54473F;
            margin-bottom: 10px;
        }

        .wind-alert {
            display: none;
            background-color: #FEF3C7;
            border: 1px solid #FCD34D;
            border-radius: 6px;
            padding: 10px;
            margin-top: 10px;
            color: #92400E;
        }

        .wind-alert.show {
                display: block;
            }

        .health-bar-container {
            margin-top: 15px;
            width: 100%;
            background-color: #ddd;
            border-radius: 10px;
            padding: 3px;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);
        }

        .health-bar {
            width: 100%;
            height: 20px;
            background-color: #4CAF50;
            border-radius: 8px;
            transition: width 0.2s ease-in-out;
        }

        .health-label, .energy-label {
            font-size: 16px;
            color: #54473F;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .energy-bar {
            width: 100%;
            height: 20px;
            background-color: #FFD700;
            border-radius: 8px;
            transition: width 0.2s ease-in-out;
        }

        .path-line {
            box-shadow: 0 0 10px rgba(76, 175, 80, 0.5);
            animation: pathPulse 2s infinite;
        }

        @keyframes pathPulse {
            0% { opacity: 0.5; }
            50% { opacity: 1; }
            100% { opacity: 0.5; }
        }

        .help{
            position: absolute;
            width: 50px;
            height: 50px;
            bottom: 50px;
            right: 50px;
            background-image: url('help.png');
            background-size: cover;
            background-position: center;
            border-radius: 50%;
            cursor: pointer;
        }

        .manual-popup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .manual-content {
            background-color: white;
            padding: 30px;
            border-radius: 12px;
            width: 80%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .close-button {
            position: absolute;
            right: 20px;
            top: 20px;
            font-size: 24px;
            cursor: pointer;
            color: #9A7E6F;
            transition: color 0.3s ease;
        }

        .close-button:hover {
            color: #54473F;
        }

        .manual-title {
            font-size: 28px;
            color: #9A7E6F;
            margin-bottom: 25px;
            border-bottom: 2px solid #E9EED9;
            padding-bottom: 15px;
        }

        .manual-welcome {
            font-size: 22px;
            color: #826a5d;
            margin: 20px 0 15px 0;
            padding-left: 15px;
            border-left: 4px solid #9A7E6F;
        }

        .manual-intro {
            color: #666;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .manual-section {
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 20px;
            color: #9A7E6F;
            margin-bottom: 15px;
            background-color: #E9EED9;
            padding: 12px 15px;
            border-radius: 8px;
        }

        .subsection-title {
            color: #826a5d;
            font-weight: bold;
            margin: 15px 0 10px 0;
        }

        .manual-list {
            margin-left: 25px;
            margin-bottom: 20px;
            color: #666;
        }

        .manual-list li {
            margin-bottom: 8px;
            line-height: 1.5;
        }

        .zoom-notice {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 10000;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .zoom-notice-content {
            background-color: white;
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            max-width: 600px;
            margin: 20px;
        }

        .zoom-notice-title {
            font-size: 28px;
            color: #54473F;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .zoom-notice-text {
            font-size: 18px;
            color: #666;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .zoom-instructions {
            background-color: #E9EED9;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #9A7E6F;
        }

        .zoom-notice-button {
            background-color: #9A7E6F;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .zoom-notice-button:hover {
            background-color: #826a5d;
        }

        .tips-box {
            background-color: #E9EED9;
            padding: 20px;
            border-radius: 8px;
            margin-top: 30px;
        }

        .tips-title {
            color: #9A7E6F;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
        }

    </style>
</head>
<body>

<div class="zoom-notice" id="zoomNotice">
    <div class="zoom-notice-content">
        <div class="zoom-notice-title">ÎšÎ±Î»ÏÏ‚ Î®ÏÎ¸Î±Ï„Îµ ÏƒÏ„Î¿ Smart Camping!</div>
        <div class="zoom-notice-text">
            Î“Î¹Î± Ï„Î·Î½ ÎºÎ±Î»ÏÏ„ÎµÏÎ· ÎµÎ¼Ï€ÎµÎ¹ÏÎ¯Î± Ï‡ÏÎ®ÏƒÎ·Ï‚, Ï€Î±ÏÎ±ÎºÎ±Î»Î¿ÏÎ¼Îµ ÏÏ…Î¸Î¼Î¯ÏƒÏ„Îµ Ï„Î¿ zoom Ï„Î¿Ï… Ï€ÎµÏÎ¹Î·Î³Î·Ï„Î® ÏƒÎ±Ï‚ ÏƒÏ„Î¿ 80%.
        </div>
        <div class="zoom-instructions">
            <strong>Î ÏÏ‚ Î½Î± ÏÏ…Î¸Î¼Î¯ÏƒÎµÏ„Îµ Ï„Î¿ zoom:</strong><br>
            â€¢ Î Î±Ï„Î®ÏƒÏ„Îµ <strong>Ctrl + -</strong> Î¼Î­Ï‡ÏÎ¹ Î½Î± Ï†Ï„Î¬ÏƒÎµÏ„Îµ ÏƒÏ„Î¿ 80%<br>
            â€¢ Î‰ Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î®ÏƒÏ„Îµ <strong>Ctrl + scroll wheel</strong><br>
            â€¢ Î‰ Î±Ï€ÏŒ Ï„Î¿ Î¼ÎµÎ½Î¿Ï View â†’ Zoom â†’ 80%
        </div>
        <div class="zoom-notice-text">
            ÎœÎµÏ„Î¬ Ï„Î·Î½ ÏÏÎ¸Î¼Î¹ÏƒÎ·, Ï€Î±Ï„Î®ÏƒÏ„Îµ "Î£Ï…Î½Î­Ï‡ÎµÎ¹Î±" Î³Î¹Î± Î½Î± Î¾ÎµÎºÎ¹Î½Î®ÏƒÎµÏ„Îµ!
        </div>
        <button class="zoom-notice-button" onclick="closeZoomNotice()">Î£Ï…Î½Î­Ï‡ÎµÎ¹Î±</button>
    </div>
</div>

    <div class="weather-box">
        <div class="time-display"></div>
        <div class="temperature-display"></div>
        <div class="wind-alert"></div>
        <div class="health-label">Î‘Î½Ï„Î¿Ï‡Î® Î£ÎºÎ·Î½Î®Ï‚</div>
        <div class="health-bar-container">
            <div class="health-bar"></div>
        </div>
        <br>
        <div class="energy-label">Î•Ï€Î¯Ï€ÎµÎ´Î¿ Î•Î½Î­ÏÎ³ÎµÎ¹Î±Ï‚</div>
        <div class="health-bar-container">
            <div class="energy-bar"></div>
        </div>  
    </div>

<!--     <div class="modDiv">
        <input class="modInput">
        <button class="modButton"></button>
    </div> -->

    <div class="message-container">
        <p class="message"></p>
    </div>

    <div class="container">
        <div class="header">
            <h1 class="title">Smart Camping Interface</h1>
            <p class="intro">Î‘Î½Î±ÎºÎ¬Î»Ï…ÏˆÎµ Ï„Î¿Î½ ÎºÏŒÏƒÎ¼Î¿ Ï„Î¿Ï… Î­Î¾Ï…Ï€Î½Î¿Ï… ÎºÎ±Î¹ Î´Î¹Î±Î´ÏÎ±ÏƒÏ„Î¹ÎºÎ¿Ï camping, ÏŒÏ€Î¿Ï…Î· Ï„ÎµÏ‡Î½Î¿Î»Î¿Î³Î¯Î± ÏƒÏ…Î½Î±Î½Ï„Î¬ Ï„Î· Ï†ÏÏƒÎ·, Î³Î¹Î± Î¼Î¹Î± ÎµÎ¼Ï€ÎµÎ¹ÏÎ¯Î± Ï€Î¿Ï… Î¸Î± ÏƒÎ¿Ï… Î¼ÎµÎ¯Î½ÎµÎ¹ Î±Î¾Î­Ï‡Î±ÏƒÏ„Î·.</p>
             <!-- Discover the world of smart and interactive camping, where technology meets nature for a unique experience. -->
        </div>
        <button class="start-button">Î”Î¹Î¬Î»ÎµÎ¾Îµ Ï€ÎµÏÎ¹Î¿Ï‡Î® ÏƒÏ„Î¿Î½ Ï‡Î¬ÏÏ„Î·.</button>
        <div class="photo-grid"></div>
    </div>

    <div class="help"></div>
    <div class="manual-popup" style="display: none;">
        <div class="manual-content">
            <span class="close-button">&times;</span>
            <h2 class="manual-title">Î•Î³Ï‡ÎµÎ¹ÏÎ¯Î´Î¹Î¿ Î§ÏÎ®ÏƒÏ„Î·</h2>
            
            <h3 class="manual-welcome">ÎšÎ±Î»ÏÏ‚ Î®ÏÎ¸Î±Ï„Îµ ÏƒÏ„Î¿ Smart Camping!</h3>
            <p class="manual-intro">Î‘Ï…Ï„ÏŒÏ‚ Î¿ Î¿Î´Î·Î³ÏŒÏ‚ Î¸Î± ÏƒÎ±Ï‚ Î²Î¿Î·Î¸Î®ÏƒÎµÎ¹ Î½Î± ÎµÎ¾Î¿Î¹ÎºÎµÎ¹Ï‰Î¸ÎµÎ¯Ï„Îµ Î¼Îµ ÏŒÎ»ÎµÏ‚ Ï„Î¹Ï‚ Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¯ÎµÏ‚ Ï„Î·Ï‚ Î­Î¾Ï…Ï€Î½Î·Ï‚ ÏƒÎºÎ·Î½Î®Ï‚ ÏƒÎ±Ï‚.</p>

            <div class="manual-section">
                <h4 class="section-title">1. Î‘ÏÏ‡Î¹ÎºÎ® Î•Î³ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ· Î£ÎºÎ·Î½Î®Ï‚</h4>
                <p class="subsection-title">Î•Ï€Î¹Î»Î¿Î³Î® Î¤Î¿Ï€Î¿Î¸ÎµÏƒÎ¯Î±Ï‚:</p>
                <ul class="manual-list">
                    <li>Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î®ÏƒÏ„Îµ Ï„Î¿Î½ Î´Î¹Î±Î´ÏÎ±ÏƒÏ„Î¹ÎºÏŒ Ï‡Î¬ÏÏ„Î· Î³Î¹Î± ÎµÏ€Î¹Î»Î¿Î³Î® ÏƒÎ·Î¼ÎµÎ¯Î¿Ï…</li>
                    <li>Î”ÎµÎ¯Ï„Îµ Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚ Î³Î¹Î± ÏƒÏ„Î±Î¸ÎµÏÏŒÏ„Î·Ï„Î± ÎµÎ´Î¬Ï†Î¿Ï…Ï‚, Ï…Î³ÏÎ±ÏƒÎ¯Î± ÎºÎ±Î¹ Î·Î»Î¹Î¿Ï†Î¬Î½ÎµÎ¹Î± Ï„Î·Ï‚ ÎºÎ¬Î¸Îµ Ï€ÎµÏÎ¹Î¿Ï‡Î®Ï‚</li>
                </ul>
                <p class="subsection-title">Î¤Î¿Ï€Î¿Î¸Î­Ï„Î·ÏƒÎ· Î Î±ÏƒÎ¬Î»Ï‰Î½:</p>
                <ul class="manual-list">
                    <li>Î‘ÎºÎ¿Î»Î¿Ï…Î¸Î®ÏƒÏ„Îµ Ï„Î¹Ï‚ Î¿Î´Î·Î³Î¯ÎµÏ‚ Î³Î¹Î± ÎºÎ¬Î¸Îµ Ï€Î¬ÏƒÎ±Î»Î¿</li>
                    <li>Î¡Ï…Î¸Î¼Î¯ÏƒÏ„Îµ Î³Ï‰Î½Î¯Î± ÎºÎ±Î¹ Î²Î¬Î¸Î¿Ï‚ Î¼Îµ Ï„Î± ÎºÎ¿Ï…Î¼Ï€Î¹Î¬ ÎµÎ»Î­Î³Ï‡Î¿Ï…</li>
                    <li>Î‘Ï†Î¿Ï Ï„Î¿Ï€Î¿Î¸ÎµÏ„Î·Î¸Î¿ÏÎ½ Î¿Î¹ Ï€Î¬ÏƒÏƒÎ±Î»Î¿Î¹, Î· ÏƒÎºÎ·Î½Î® ÏƒÏ„Î®Î½ÎµÏ„Î±Î¹ Î±Ï…Ï„ÏŒÎ¼Î±Ï„Î±</li>
                </ul>
            </div>

            <div class="manual-section">
                <h4 class="section-title">2. ÎšÏÏÎ¹ÎµÏ‚ Î›ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¯ÎµÏ‚</h4>
                <p class="subsection-title">Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· Î•Î½Î­ÏÎ³ÎµÎ¹Î±Ï‚:</p>
                <ul class="manual-list">
                    <li>Î•Î½ÎµÏÎ³Î¿Ï€Î¿Î¯Î·ÏƒÎ·/Î±Ï€ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¯Î·ÏƒÎ· ÏƒÏ…ÏƒÎºÎµÏ…ÏÎ½</li>
                    <li>Î Î±ÏÎ±ÎºÎ¿Î»Î¿ÏÎ¸Î·ÏƒÎ· ÎµÏ€Î¹Ï€Î­Î´Î¿Ï… Î¼Ï€Î±Ï„Î±ÏÎ¯Î±Ï‚</li>
                    <li>Î›ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¯Î± ÎµÎ¾Î¿Î¹ÎºÎ¿Î½ÏŒÎ¼Î·ÏƒÎ·Ï‚</li>
                    <li><strong>Î¤Î± Ï†Ï‰Ï„Î¿Î²Î¿Î»Ï„Î±ÏŠÎºÎ¬ Î±Î½Î±Ï€Î»Î·ÏÏÎ½Î¿Ï…Î½ Ï„Î¿ 2% Ï„Î·Ï‚ ÎµÎ½Î­ÏÎ³ÎµÎ¹Î±Ï‚ Ï„Î·Ï‚ ÏƒÎºÎ·Î½Î®Ï‚ Î¼ÎµÏ„Î±Î¾Ï Ï„Ï‰Î½ Ï‰ÏÏÎ½ 06:00 - 20:00</strong>, ÎµÎ½Ï Ï„Î¹Ï‚ Ï…Ï€ÏŒÎ»Î¿Î¹Ï€ÎµÏ‚ ÏÏÎµÏ‚ Î´ÎµÎ½ Ï…Ï€Î¬ÏÏ‡ÎµÎ¹ Î±ÏÎºÎµÏ„Î® Î·Î»Î¹Î¿Ï†Î¬Î½ÎµÎ¹Î±.</li>
                </ul>
                <p class="subsection-title">Î ÏÎ¿ÏƒÏ„Î±Ï„ÎµÏ…Ï„Î¹ÎºÎ¬ Î Î±Î½Î¹Î¬:</p>
                <ul class="manual-list">
                    <li>Î•Ï€Î¹Î»Î¿Î³Î® ÎºÎ±Ï„ÎµÏÎ¸Ï…Î½ÏƒÎ·Ï‚ Ï„Î¿Ï€Î¿Î¸Î­Ï„Î·ÏƒÎ·Ï‚</li>
                    <li>Î Î±ÏÎ±ÎºÎ¿Î»Î¿ÏÎ¸Î·ÏƒÎ· Ï€ÏÎ¿ÎµÎ¹Î´Î¿Ï€Î¿Î¹Î®ÏƒÎµÏ‰Î½ Î±Î½Î­Î¼Î¿Ï…</li>
                    <li>Î”ÎµÎ½ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹ Î½Î± Î²ÏÎ¯ÏƒÎºÎµÏƒÎ±Î¹ ÏƒÏ„Î¿ Î¼ÎµÎ½Î¿Ï Ï„Ï‰Î½ Ï€Î±Î½Î¹ÏÎ½ Î³Î¹Î± Î½Î± Ï€ÏÎ¿ÏƒÏ„Î±Ï„ÎµÏÎ¿Ï…Î½ Ï„Î·Î½ ÏƒÎºÎ·Î½Î®, ÎµÏ†ÏŒÏƒÎ¿Î½ Î­Ï‡Î¿Ï…Î½ Ï„Î¿Ï€Î¿Î¸ÎµÏ„Î·Î¸ÎµÎ¯</li>
                </ul>
            </div>

            <div class="manual-section">
                <h4 class="section-title">3. Î ÏÏŒÏƒÎ¸ÎµÏ„ÎµÏ‚ Î›ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¯ÎµÏ‚</h4>
                
                <p class="subsection-title">ÎšÎ±Î¹ÏÏŒÏ‚ ÎºÎ±Î¹ Î ÎµÏÎ¹Î²Î¬Î»Î»Î¿Î½:</p>
                <ul class="manual-list">
                    <li><strong>Î ÏÎ¿Î²Î¿Î»Î® ÎšÎ±Î¹ÏÎ¿Ï:</strong> Î Î±ÏÎ±ÎºÎ¿Î»Î¿ÏÎ¸Î·ÏƒÎ· Î¸ÎµÏÎ¼Î¿ÎºÏÎ±ÏƒÎ¯Î±Ï‚, Ï…Î³ÏÎ±ÏƒÎ¯Î±Ï‚ ÎºÎ±Î¹ Ï€ÏÏŒÎ³Î½Ï‰ÏƒÎ· Î³Î¹Î± Ï„Î¹Ï‚ ÎµÏ€ÏŒÎ¼ÎµÎ½ÎµÏ‚ ÏÏÎµÏ‚</li>
                    <li><strong>Î•Î¹Î´Î¿Ï€Î¿Î¹Î®ÏƒÎµÎ¹Ï‚:</strong> Î†Î¼ÎµÏƒÎ· ÎµÎ½Î·Î¼Î­ÏÏ‰ÏƒÎ· Î³Î¹Î± Î±ÎºÏÎ±Î¯Î± ÎºÎ±Î¹ÏÎ¹ÎºÎ¬ Ï†Î±Î¹Î½ÏŒÎ¼ÎµÎ½Î±</li>
                </ul>

                <p class="subsection-title">Î¦Ï‰Ï„Î¹ÏƒÎ¼ÏŒÏ‚ ÎºÎ±Î¹ Î†Î½ÎµÏƒÎ·:</p>
                <ul class="manual-list">
                    <li><strong>Î¡ÏÎ¸Î¼Î¹ÏƒÎ· Î¦Ï‰Ï„Î¹ÏƒÎ¼Î¿Ï:</strong> Î•Ï€Î¹Î»Î¿Î³Î® Î­Î½Ï„Î±ÏƒÎ·Ï‚ ÎºÎ±Î¹ Ï‡ÏÏÎ¼Î±Ï„Î¿Ï‚ Ï†Ï‰Ï„Î¹ÏƒÎ¼Î¿Ï</li>
                    <li><strong>Î ÏÎ¿ÎºÎ±Î¸Î¿ÏÎ¹ÏƒÎ¼Î­Î½Î± Î ÏÎ¿Ï†Î¯Î»:</strong> Î•Î¹Î´Î¹ÎºÎ­Ï‚ ÏÏ…Î¸Î¼Î¯ÏƒÎµÎ¹Ï‚ Î³Î¹Î± Î´Î¹Î¬Î²Î±ÏƒÎ¼Î±, Ï‡Î±Î»Î¬ÏÏ‰ÏƒÎ· Î® Î´Î¹Î±ÏƒÎºÎ­Î´Î±ÏƒÎ·</li>
                    <li>Î¤Î± Ï†ÏÏ„Î± Î­Î¾Ï‰ Î±Ï€ÏŒ Ï„Î·Î½ ÏƒÎºÎ·Î½Î® Î´ÎµÎ½ ÎºÎ±Ï„Î±Î½Î±Î»ÏÎ½Î¿Ï…Î½ ÏÎµÏÎ¼Î± ÎºÎ±Î¸ÏÏ‚ Ï€Î±ÏÎ­Ï‡ÎµÏ„Î±Î¹ ÎµÎ½Î­ÏÎ³ÎµÎ¹Î± Î±Ï€ÏŒ Ï„Î¿Î½ Ï‡ÏÏÎ¿ Ï„Î¿Ï… camping</li>
                </ul>

                <p class="subsection-title">Î Î»Î¿Î®Î³Î·ÏƒÎ· ÎºÎ±Î¹ Î‘ÏƒÏ†Î¬Î»ÎµÎ¹Î±:</p>
                <ul class="manual-list">
                    <li><strong>ÎšÎ±Ï„Î±Ï†ÏÎ³Î¹Î± ÎˆÎºÏ„Î±ÎºÏ„Î·Ï‚ Î‘Î½Î¬Î³ÎºÎ·Ï‚:</strong> Î•Î½Ï„Î¿Ï€Î¹ÏƒÎ¼ÏŒÏ‚ ÎºÎ±Î¹ ÎºÎ±Î¸Î¿Î´Î®Î³Î·ÏƒÎ· Ï€ÏÎ¿Ï‚ Ï„Î¿ ÎºÎ¿Î½Ï„Î¹Î½ÏŒÏ„ÎµÏÎ¿ ÎºÎ±Ï„Î±Ï†ÏÎ³Î¹Î¿</li>
                    <li><strong>Î’Î­Î»Ï„Î¹ÏƒÏ„ÎµÏ‚ Î”Î¹Î±Î´ÏÎ¿Î¼Î­Ï‚:</strong> Î ÏÎ¿Ï„Î¬ÏƒÎµÎ¹Ï‚ Î±ÏƒÏ†Î±Î»ÏÎ½ Î¼Î¿Î½Î¿Ï€Î±Ï„Î¹ÏÎ½ Î¼Îµ Î²Î¬ÏƒÎ· Ï„Î¹Ï‚ ÎºÎ±Î¹ÏÎ¹ÎºÎ­Ï‚ ÏƒÏ…Î½Î¸Î®ÎºÎµÏ‚</li>
                </ul>

                <p class="subsection-title">Î¤Î¿Ï…ÏÎ¹ÏƒÏ„Î¹ÎºÎ­Ï‚ Î¥Ï€Î·ÏÎµÏƒÎ¯ÎµÏ‚:</p>
                <ul class="manual-list">
                    <li><strong>Î‘Î¾Î¹Î¿Î¸Î­Î±Ï„Î±:</strong> Î‘Î½Î±ÎºÎ¬Î»Ï…ÏˆÎ· ÎºÎ±Î¹ Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚ Î³Î¹Î± ÎºÎ¿Î½Ï„Î¹Î½Î¬ ÏƒÎ·Î¼ÎµÎ¯Î± ÎµÎ½Î´Î¹Î±Ï†Î­ÏÎ¿Î½Ï„Î¿Ï‚</li>
                    <li><strong>ÎœÎ¿Î½Î¿Ï€Î¬Ï„Î¹Î± Î ÎµÎ¶Î¿Ï€Î¿ÏÎ¯Î±Ï‚:</strong> Î ÏÎ¿Ï„ÎµÎ¹Î½ÏŒÎ¼ÎµÎ½ÎµÏ‚ Î´Î¹Î±Î´ÏÎ¿Î¼Î­Ï‚ Î¼Îµ Î²Î±Î¸Î¼ÏŒ Î´Ï…ÏƒÎºÎ¿Î»Î¯Î±Ï‚</li>
                    <li><strong>Î¦Ï‰Ï„Î¿Î³ÏÎ±Ï†Î¹ÎºÏŒ Î¥Î»Î¹ÎºÏŒ:</strong> Î ÏÎ¿ÎµÏ€Î¹ÏƒÎºÏŒÏ€Î·ÏƒÎ· Ï„Î¿Ï€Î¿Î¸ÎµÏƒÎ¹ÏÎ½ ÎºÎ±Î¹ Î´Î¹Î±Î´ÏÎ¿Î¼ÏÎ½</li>
                </ul>

                <p class="subsection-title">Î¥Ï€Î·ÏÎµÏƒÎ¯ÎµÏ‚ Camping:</p>
                <ul class="manual-list">
                    <li><strong>Î Î±ÏÎ±Î³Î³ÎµÎ»Î¯ÎµÏ‚ Î¦Î±Î³Î·Ï„Î¿Ï:</strong> Online Î¼ÎµÎ½Î¿Ï ÎºÎ±Î¹ Ï€Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î± Î¼Îµ Ï€Î±ÏÎ¬Î´Î¿ÏƒÎ· ÏƒÏ„Î· ÏƒÎºÎ·Î½Î®</li>
                    <li><strong>ÎšÏÎ±Ï„Î®ÏƒÎµÎ¹Ï‚ Î”ÏÎ±ÏƒÏ„Î·ÏÎ¹Î¿Ï„Î®Ï„Ï‰Î½:</strong> Î£Ï…Î¼Î¼ÎµÏ„Î¿Ï‡Î® ÏƒÎµ Î¿ÏÎ³Î±Î½Ï‰Î¼Î­Î½ÎµÏ‚ ÎµÎºÎ´Î·Î»ÏÏƒÎµÎ¹Ï‚ ÎºÎ±Î¹ Î±Î¸Î»Î®Î¼Î±Ï„Î±</li>
                    <li><strong>Î†Î¼ÎµÏƒÎ· Î•Ï€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î¯Î±:</strong> Î‘Ï€ÎµÏ…Î¸ÎµÎ¯Î±Ï‚ ÏƒÏÎ½Î´ÎµÏƒÎ· Î¼Îµ Ï„Î· ÏÎµÏƒÎµÏˆÎ¹ÏŒÎ½ Î³Î¹Î± Î¿Ï€Î¿Î¹Î¿Î´Î®Ï€Î¿Ï„Îµ Î±Î¯Ï„Î·Î¼Î±</li>
                </ul>

                <p class="subsection-title">Î•Ï€Î¹Ï„Î®ÏÎ·ÏƒÎ· Î ÎµÏÎ¹Î²Î¬Î»Î»Î¿Î½Ï„Î¿Ï‚:</p>
                <ul class="manual-list">
                    <li><strong>Î ÎµÏÎ¹Î¼ÎµÏ„ÏÎ¹ÎºÎ® Î˜Î­Î±ÏƒÎ·:</strong> ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ Ï„Î¿Ï… Ï‡ÏÏÎ¿Ï… Î³ÏÏÏ‰ Î±Ï€ÏŒ Ï„Î· ÏƒÎºÎ·Î½Î®</li>
                </ul>
            </div>

            <div class="tips-box">
                <h4 class="tips-title">Î§ÏÎ®ÏƒÎ¹Î¼ÎµÏ‚ Î£Ï…Î¼Î²Î¿Ï…Î»Î­Ï‚:</h4>
                <ul class="manual-list">
                    <li>Î•Î»Î­Î³Ï‡ÎµÏ„Îµ Ï„Î±ÎºÏ„Î¹ÎºÎ¬ Ï„Î¹Ï‚ ÎºÎ±Î¹ÏÎ¹ÎºÎ­Ï‚ Ï€ÏÎ¿ÎµÎ¹Î´Î¿Ï€Î¿Î¹Î®ÏƒÎµÎ¹Ï‚</li>
                    <li>Î”Î¹Î±Ï„Î·ÏÎµÎ¯Ï„Îµ Ï„Î¿ ÎµÏ€Î¯Ï€ÎµÎ´Î¿ ÎµÎ½Î­ÏÎ³ÎµÎ¹Î±Ï‚ Ï€Î¬Î½Ï‰ Î±Ï€ÏŒ 20%</li>
                    <li>Î“Î¹Î± Î²Î¿Î®Î¸ÎµÎ¹Î±, ÎµÏ€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î®ÏƒÏ„Îµ Î¼Îµ Ï„Î· ÏÎµÏƒÎµÏˆÎ¹ÏŒÎ½ Î¼Î­ÏƒÏ‰ Ï„Î·Ï‚ ÎµÏ†Î±ÏÎ¼Î¿Î³Î®Ï‚</li>
                </ul>
            </div>
        </div>
    </div>

<script>

    // Function to close zoom notice
    function closeZoomNotice() {
        document.getElementById('zoomNotice').style.display = 'none';
    }

    let currentRotation = 0;
    let currentDepth = 0;
    let poleDiv;
    let currentPoleIndex = 0;
    const targetAngles = [30, 10, -20, -40];
    const targetDepth = 5;
    let polesPlaced = 0;
    let tentHealth = 100;
    const directions = ['north','south','east','west'];
    let activeCoverDirection = null;
    let clickedDirection;
    let devicesOn = [];
    let energyLevel = 100;
    let currentTime = new Date();
    currentTime.setHours(7, 30, 0); // Start at 8:00
    let initialFlag = false;
    const deviceStates = {};
    const devices = ['Air Condition','Î¦ÏÏ„Î±','Î˜Î­ÏÎ¼Î±Î½ÏƒÎ·','Î˜ÎµÏÎ¼Î¿ÏƒÏÏ†Ï‰Î½Î±Ï‚','Î¤Î·Î»ÎµÏŒÏÎ±ÏƒÎ·','Î¨Ï…Î³ÎµÎ¯Î¿'];
    devices.forEach(device => deviceStates[device] = false);
    let lastEnergyUpdate = Date.now();
    const ENERGY_UPDATE_INTERVAL = 10000; // Minimum time between updates (10 seconds)
    const areaValues = [
        [{ stability: 85, humidity: 45, sunExposure: 75 },
                { stability: 65, humidity: 60, sunExposure: 85 },
                { stability: 90, humidity: 35, sunExposure: 65 }],
        [{ stability: 70, humidity: 55, sunExposure: 90 },
                { stability: 80, humidity: 40, sunExposure: 70 },
                { stability: 75, humidity: 50, sunExposure: 80 }],
        [{ stability: 95, humidity: 30, sunExposure: 60 },
                { stability: 60, humidity: 65, sunExposure: 95 },
                { stability: 85, humidity: 45, sunExposure: 85 }]];
    let tentLocation = '22';//Ï„Î¿ id Î±Ï€Î¿ Ï„Î¿ div Ï€Î¿Ï… Î¸Î± Î¼Ï€ÎµÎ¹ Ï„Î¿ tent
    const possibleShelterLocations = ['11','13','31', '33'];
    let temp;
    let availableShelterLocations;
    let shelterLocation; //Ï„Î¿ id Î±Ï€Î¿ Ï„Î¿ div Ï€Î¿Ï… Î¸Î± Î¼Ï€ÎµÎ¹ Ï„Î¿ shelter
    let firstTime = true;
    let startCell;
    let endCell;
    let protectiveCovers = {
    north: false,
    south: false,
    east: false,
    west: false};
    let selectedItems = [];

    $('.help').click(function(){
        $('.manual-popup').fadeIn();
    });

    $('.close-button').click(function(){
        $('.manual-popup').fadeOut();
    });

    // ÎšÎ»ÎµÎ¯ÏƒÎ¹Î¼Î¿ Ï„Î¿Ï… popup ÏŒÏ„Î±Î½ ÎºÎ¬Î½Î¿Ï…Î¼Îµ ÎºÎ»Î¹Îº Î­Î¾Ï‰ Î±Ï€ÏŒ Ï„Î¿ content
    $(document).mouseup(function(e) {
        let container = $('.manual-content');
        if (!container.is(e.target) && container.has(e.target).length === 0) {
            $('.manual-popup').fadeOut();
        }
    });

    function createMap() {
        const mainImage = $('<div>').css({
            'background-image': 'url("map2.jpg")',
            'background-size': 'cover',
            'background-position': 'center',
            'width': '100%',
            'height': '100%',
            'z-index': '1',
            'position': 'relative'
        });
        $('.photo-grid').html('').append(mainImage);
        $('.photo-grid').show();
        createGrid();
    }

    //If createGrid has variable, then it is called from main menu
    function createGrid(flag = false) {
        let gridDiv = $('<div>').addClass('gridDiv');

        if(flag){
            if(firstTime){            
                firstTime = false;

                // Î•Ï€Î¹Î»Î­Î³Î¿Ï…Î¼Îµ Ï„Ï…Ï‡Î±Î¯Î± Î¼Î¹Î± Ï„Î¿Ï€Î¿Î¸ÎµÏƒÎ¯Î± Î³Î¹Î± Ï„Î¿ ÎºÎ±Ï„Î±Ï†ÏÎ³Î¹Î¿
                temp = tentLocation.toString();
                
                // Î‘Ï†Î±Î¯ÏÎµÏƒÎ· Ï„Î·Ï‚ Î¸Î­ÏƒÎ·Ï‚ Ï„Î¿Ï… tentLocation Î±Ï€ÏŒ Ï„Î¹Ï‚ Ï€Î¹Î¸Î±Î½Î­Ï‚ Î¸Î­ÏƒÎµÎ¹Ï‚
                availableShelterLocations = possibleShelterLocations.filter(loc => loc !== temp);
                
                // Î•Ï€Î¹Î»Î¿Î³Î® ÎœÎ™Î‘Î£ Ï„Ï…Ï‡Î±Î¯Î±Ï‚ Ï„Î¿Ï€Î¿Î¸ÎµÏƒÎ¯Î±Ï‚ Î³Î¹Î± Ï„Î¿ ÎºÎ±Ï„Î±Ï†ÏÎ³Î¹Î¿
                shelterLocation = availableShelterLocations[Math.floor(Math.random() * availableShelterLocations.length)];
            }
            
            // Create grid to place tent and camp
            for (let i = 1; i <= 3; i++) {
                for(let j = 1; j <= 3; j++){
                    let tempDiv = $('<div>').attr('id',`div${i}${j}`);

                    // Î¤Î¿Ï€Î¿Î¸ÎµÏ„Î·ÏƒÎ· ÎºÎ±Ï„Î±Ï†Ï…Î³Î¹Î¿Ï…
                    if(i.toString() + j.toString() === shelterLocation){
                        let shelterSpan = $(`<span>`).css({
                            'display': 'flex',
                            'justify-content': 'center',
                            'align-items': 'center',
                            'width': '100%',
                            'height': '100%'
                        });
                        
                        let image = $('<img>').attr('src', 'shelter2.png').css({
                            'width': '100px',
                            'height': '100px',
                            'object-fit': 'contain'
                        });
                        
                        shelterSpan.append(image);
                        tempDiv.append(shelterSpan);
                    }

                    // Î¤Î¿Ï€Î¿Î¸ÎµÏ„Î·ÏƒÎ· ÏƒÎºÎ·Î½Î·Ï‚
                    if(i.toString() == temp[0] && j.toString() === temp[1]){
                        let stabilitySpan = $(`<span>`).css({
                            'display': 'flex',
                            'justify-content': 'center',
                            'align-items': 'center',
                            'width': '100%',
                            'height': '100%'
                        });
                        
                        let image = $('<img>').attr('src', 'topdownTent3.png').css({
                            'width': '100px',
                            'height': '100px',
                            'object-fit': 'contain'
                        });
                        
                        stabilitySpan.append(image);
                        tempDiv.append(stabilitySpan);
                    }
                    gridDiv.append(tempDiv);
                }
            }

            $(flag).append(gridDiv);
            $('.steak').click(function() {
                $('.container').empty();
                createControlButtons();
                placeSteak();
                $('.controls-container').show();
                showMessage(`Î¤Î¿Ï€Î¿Î¸ÎµÏ„Î®ÏƒÏ„Îµ Ï„Î¿Î½ Ï€Î¬ÏƒÏƒÎ±Î»Î¿ ${currentPoleIndex + 1} Î²Î¬Î¸Î¿Ï‚ ${targetDepth} Î¼Î­Ï„ÏÎ± ÎºÎ±Î¹ Î¼Îµ Î³Ï‰Î½Î¯Î± ${targetAngles[currentPoleIndex]}Â°.`);
            });
        }else{
            for (let i = 0; i < 3; i++) {
                for(let j = 0; j < 3; j++){
                    let tempDiv = $('<div>').addClass('steak').attr('id',`${i+1}${j+1}`);
                    let stabilitySpan = $('<span>Î£Ï„Î±Î¸ÎµÏÏŒÏ„Î·Ï„Î± Î•Î´Î¬Ï†Î¿Ï…Ï‚: ' + areaValues[i][j].stability + '%<br>Î¥Î³ÏÎ±ÏƒÎ¯Î±: ' + areaValues[i][j].humidity + '%<br>ÎˆÎºÎ¸ÎµÏƒÎ· Î£Ï„Î¿Î½ Î‰Î»Î¹Î¿: ' + areaValues[i][j].sunExposure + '%</span>');
                    tempDiv.append(stabilitySpan);
                    gridDiv.append(tempDiv);
                }
            }

            $('.photo-grid').append(gridDiv);

            $('.steak').click(function() {
                tentLocation = $(this).attr('id');
                $('.container').empty();
                createControlButtons();
                placeSteak();
                $('.controls-container').show();
                showMessage(`Î¤Î¿Ï€Î¿Î¸ÎµÏ„Î®ÏƒÏ„Îµ Ï„Î¿Î½ Ï€Î¬ÏƒÏƒÎ±Î»Î¿ ${currentPoleIndex + 1} Î²Î¬Î¸Î¿Ï‚ ${targetDepth} Î¼Î­Ï„ÏÎ± ÎºÎ±Î¹ Î¼Îµ Î³Ï‰Î½Î¯Î± ${targetAngles[currentPoleIndex]}Â°.`);
            });
        }  
    }

    function createControlButtons() {
        const controlsContainer = $('<div>').addClass('controls-container');
    
        // Movement Card
        const movementCard = $('<div>').addClass('control-card');
        const movementTitle = $('<div>').addClass('card-title').text('ğŸ”¨ ÎšÎ¯Î½Î·ÏƒÎ· Î Î±ÏƒÎ¬Î»Î¿Ï…');
        const movementButtons = $('<div>').addClass('card-buttons');
        
        const moveUpButton = $('<button>').addClass('control-button').text('â¬†ï¸ Î£Î®ÎºÏ‰ÏƒÎµ');
        const moveDownButton = $('<button>').addClass('control-button').text('â¬‡ï¸ ÎšÎ¬ÏÏ†Ï‰ÏƒÎµ');
        
        movementButtons.append(moveUpButton, moveDownButton);
        movementCard.append(movementTitle, movementButtons);

        // Rotation Card
        const rotationCard = $('<div>').addClass('control-card');
        const rotationTitle = $('<div>').addClass('card-title').text('ğŸ”„ Î ÎµÏÎ¹ÏƒÏ„ÏÎ¿Ï†Î®');
        const rotationButtons = $('<div>').addClass('card-buttons');
        
        const rotateLeftButton = $('<button>').addClass('control-button').text('â†» Î‘ÏÎ¹ÏƒÏ„ÎµÏÎ¬');
        const rotateRightButton = $('<button>').addClass('control-button').text('â†º Î”ÎµÎ¾Î¹Î¬');
        
        rotationButtons.append(rotateLeftButton, rotateRightButton);
        rotationCard.append(rotationTitle, rotationButtons);

        // Status Card
        const statusCard = $('<div>').addClass('control-card display-card');
        const statusTitle = $('<div>').addClass('card-title').text('ğŸ“Š ÎšÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·');
        const angleDisplay = $('<div>').addClass('display-value').text('Î“Ï‰Î½Î¯Î±: 0Â°');
        const depthDisplay = $('<div>').addClass('display-value').text('Î’Î¬Î¸Î¿Ï‚: 0 Î¼Î­Ï„ÏÎ±');
        
        statusCard.append(statusTitle, angleDisplay, depthDisplay);

        // Next Pole Card (initially hidden)
        const nextPoleCard = $('<div>').addClass('control-card next-pole-card').hide();
        const nextPoleTitle = $('<div>').addClass('card-title').text('âœ… Î•Ï€ÏŒÎ¼ÎµÎ½Î¿ Î’Î®Î¼Î±');
        const nextPoleButtons = $('<div>').addClass('card-buttons');
        const nextPoleButton = $('<button>').addClass('control-button').text('Î•Ï€ÏŒÎ¼ÎµÎ½Î¿Ï‚ Î Î¬ÏƒÏƒÎ±Î»Î¿Ï‚');
        
        nextPoleButtons.append(nextPoleButton);
        nextPoleCard.append(nextPoleTitle, nextPoleButtons);

        controlsContainer.append(movementCard, rotationCard, statusCard, nextPoleCard);
        $('body').append(controlsContainer);

        // Event handlers
        moveUpButton.click(function() {
            let angleInRadians = currentRotation * (Math.PI / 180);
            let deltaY = Math.cos(angleInRadians) * -50;
            let deltaX = Math.sin(angleInRadians) * -50;

            let poleTop = parseInt(poleDiv.css('top')) + deltaY;
            let poleLeft = parseInt(poleDiv.css('left')) - deltaX;

            poleDiv.css({ 
                top: `${poleTop}px`, 
                left: `${poleLeft}px`
            });
            currentDepth -= 0.5;
            adjustPoleVisibility();
        });

        moveDownButton.click(function() {
            let angleInRadians = currentRotation * (Math.PI / 180);
            let deltaY = Math.cos(angleInRadians) * 50;
            let deltaX = Math.sin(angleInRadians) * 50;

            let poleTop = parseInt(poleDiv.css('top')) + deltaY;
            let poleLeft = parseInt(poleDiv.css('left')) - deltaX;

            poleDiv.css({ 
                top: `${poleTop}px`, 
                left: `${poleLeft}px`
            });

            currentDepth += 0.5
            adjustPoleVisibility();
        });

        rotateLeftButton.click(function() {
            currentRotation -= 10;
            poleDiv.css('transform', `rotate(${currentRotation}deg)`);
            updateAngleDisplay();
        });

        rotateRightButton.click(function() {
            currentRotation += 10;
            poleDiv.css('transform', `rotate(${currentRotation}deg)`);
            updateAngleDisplay();
        });

        // Store references for later use
        controlsContainer.data('angleDisplay', angleDisplay);
        controlsContainer.data('depthDisplay', depthDisplay);
        controlsContainer.data('nextPoleCard', nextPoleCard);
        controlsContainer.data('nextPoleButton', nextPoleButton);
    }

    function adjustPoleVisibility() {
        let poleRect = poleDiv[0].getBoundingClientRect();
        let eraseRect = $('.container').find('div').last()[0].getBoundingClientRect();
        
        let angleInRadians = currentRotation * (Math.PI / 180);
        let poleHeight = poleRect.height;
        let poleWidth = poleRect.width;
        
        let poleCenter = {
            x: poleRect.left + poleWidth / 2,
            y: poleRect.top + poleHeight / 2
        };
        
        let distanceToErase = eraseRect.top - poleCenter.y;
        
        let visibleLength;
        if (Math.abs(currentRotation) < 45) {
            visibleLength = distanceToErase / Math.cos(angleInRadians);
        } else {
            visibleLength = Math.sqrt(
                Math.pow(distanceToErase, 2) + 
                Math.pow(distanceToErase * Math.tan(angleInRadians), 2)
            );
        }
        
        let visiblePercentage = (visibleLength + poleHeight / 2) / poleHeight * 100;
        visiblePercentage = Math.max(0, Math.min(100, visiblePercentage));
        
        if (poleRect.bottom > eraseRect.top) {
            poleDiv.css('clip-path', `inset(0 0 ${100 - visiblePercentage}% 0)`);
        } else {
            poleDiv.css('clip-path', 'none');
        }

        // Update depth display using the new card system
        const depthDisplay = $('.controls-container').data('depthDisplay');
        if (depthDisplay) {
            depthDisplay.text(`Î’Î¬Î¸Î¿Ï‚: ${currentDepth} Î¼Î­Ï„ÏÎ±`);
            if(currentDepth === targetDepth){
                depthDisplay.css('background-color', '#4CAF50').css('color', 'white');
                showMessage(`Î£Ï‰ÏƒÏ„ÏŒ Î²Î¬Î¸Î¿Ï‚! Î¤ÏÏÎ± ÏÏ…Î¸Î¼Î¯ÏƒÏ„Îµ Ï„Î· Î³Ï‰Î½Î¯Î± ÏƒÏ„Î¹Ï‚ ${targetAngles[currentPoleIndex]}Â°`);
            }else{
                depthDisplay.css('background-color', 'rgba(255, 255, 255, 0.7)').css('color', '#54473F');
            }
        }
        nextPole();
    }

    function placeSteak() {
        $('.container').css({
            'background-image': 'url("dirt.jpg")',
            'background-size': '100% 100%',
            'background-repeat': 'no-repeat',
            'background-position': 'center',
            'position': 'relative'
        });

        poleDiv = $('<div>').addClass('poleDiv').css({
            'height': '2000px',
            'width': '100%',
            'background-image': 'url("woodenPole3.png")',
            'background-size': 'cover',
            'background-repeat': 'no-repeat',
            'background-position': 'center',
            // 'border': '3px solid red',
            'position': 'absolute',
            'top': '-1200px',
            'left': '0px',
            'transform-origin': 'center center'
        });

        let eraseDiv = $('<div>').css({
            'height': '500px',
            'width': '100%',
            'position': 'absolute',
            // 'border': '3px solid green',
            'top': '500px',
            'left': '0px',
            'overflow': 'hidden'
        });

        $('.container').append(poleDiv);
        $('.container').append(eraseDiv);
    }

    function updateAngleDisplay() {
        let normalizedAngle = ((currentRotation % 360 + 540) % 360) - 180;
        
        // Update angle display using the new card system
        const angleDisplay = $('.controls-container').data('angleDisplay');
        if (angleDisplay) {
            angleDisplay.text(`Î“Ï‰Î½Î¯Î±: ${normalizedAngle}Â°`);
            
            if (normalizedAngle === targetAngles[currentPoleIndex]) {
                angleDisplay.css('background-color', '#4CAF50').css('color', 'white');
                if(currentDepth === targetDepth) {
                    showMessage(`Î¤Î­Î»ÎµÎ¹Î±! ÎŸ Ï€Î¬ÏƒÏƒÎ±Î»Î¿Ï‚ ${currentPoleIndex + 1} Ï„Î¿Ï€Î¿Î¸ÎµÏ„Î®Î¸Î·ÎºÎµ ÏƒÏ‰ÏƒÏ„Î¬!`);
                }
            } else {
                angleDisplay.css('background-color', 'rgba(255, 255, 255, 0.7)').css('color', '#54473F');
            }
        }
        nextPole();
    }

    $(document).ready(function() {
        $('.start-button').click(function() {
            $('.controls-container').remove();
            $('.container').find('.photo-grid').remove();
            const newPhotoGrid = $('<div>').addClass('photo-grid');
            $('.container').append(newPhotoGrid);
            createMap();
            showMessage('Î•Ï€Î¹Î»Î­Î¾Ï„Îµ Ï„Î·Î½ ÎºÎ±Ï„Î¬Î»Î»Î·Î»Î· Ï€ÎµÏÎ¹Î¿Ï‡Î® ÏƒÏ„Î¿Î½ Ï‡Î¬ÏÏ„Î· Ï€Î¿Ï… Î¸ÎµÏ‚ Î½Î± ÏƒÏ„Î®ÏƒÎµÎ¹Ï‚ Ï„Î·Î½ ÏƒÎºÎ·Î½Î®.');
        });
        $(".weather-box").hide();
    });

    function nextPole(mod = false) {
        if(mod){
            initialFlag = true;
            mainMenu();

            showMessage("Î©ÏÎ±Î¹Î±, Î· ÏƒÎºÎ·Î½Î® Î­Ï‡ÎµÎ¹ ÏƒÏ„Î·Î¸ÎµÎ¯. Î’ÏÎ¯ÏƒÎºÎµÏƒÎ±Î¹ ÏƒÏ„Î¿ ÎºÎµÎ½Ï„ÏÎ¹ÎºÏŒ Î¼ÎµÎ½Î¿Ï. Î‘Ï€ÏŒ ÎµÎ´Ï Î¼Ï€Î¿ÏÎµÎ¯Ï‚ Î½Î± ÎµÎ»Î­Î³Î¾ÎµÎ¹Ï‚ ÏŒÎ»ÎµÏ‚ Ï„Î¹Ï‚ Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¯ÎµÏ‚ Ï„Î·Ï‚ ÏƒÎºÎ·Î½Î®Ï‚.");
            $(".container").css({})
        }

        const depthDisplay = $('.controls-container').data('depthDisplay');
        const angleDisplay = $('.controls-container').data('angleDisplay');
        const nextPoleCard = $('.controls-container').data('nextPoleCard');
        const nextPoleButton = $('.controls-container').data('nextPoleButton');

        // Check if both depth and angle are correct by checking background color
        const depthCorrect = depthDisplay && depthDisplay.css('background-color') === 'rgb(76, 175, 80)';
        const angleCorrect = angleDisplay && angleDisplay.css('background-color') === 'rgb(76, 175, 80)';

        if(depthCorrect && angleCorrect) {
            if (currentPoleIndex < 3) {
                nextPoleCard.show();
                
                // Remove previous click handlers and add new one
                nextPoleButton.off('click').on('click', function() {
                    currentPoleIndex++;
                    polesPlaced++;
                    resetPolePosition();
                    showMessage(`Î¤Î¿Ï€Î¿Î¸ÎµÏ„Î®ÏƒÏ„Îµ Ï„Î¿Î½ Ï€Î¬ÏƒÏƒÎ±Î»Î¿ ${currentPoleIndex + 1} Î¼Îµ Î³Ï‰Î½Î¯Î± ${targetAngles[currentPoleIndex]}Â° ÎºÎ±Î¹ Î²Î¬Î¸Î¿Ï‚ ${targetDepth} Î¼Î­Ï„ÏÎ±`);
                    nextPoleCard.hide();
                    // Reset displays
                    depthDisplay.css('background-color', 'rgba(255, 255, 255, 0.7)').css('color', '#54473F');
                    angleDisplay.css('background-color', 'rgba(255, 255, 255, 0.7)').css('color', '#54473F');
                });
            } else if (currentPoleIndex === 3) {
                showMessage("Î£Ï…Î³Ï‡Î±ÏÎ·Ï„Î®ÏÎ¹Î±! ÎŒÎ»Î¿Î¹ Î¿Î¹ Ï€Î¬ÏƒÏƒÎ±Î»Î¿Î¹ Ï„Î¿Ï€Î¿Î¸ÎµÏ„Î®Î¸Î·ÎºÎ±Î½ ÏƒÏ‰ÏƒÏ„Î¬!");
                nextPoleButton.text("ÎŸÎ»Î¿ÎºÎ»Î®ÏÏ‰ÏƒÎ·!");
                nextPoleCard.show();
                
                nextPoleButton.off('click').on('click', function(){
                    $(".container").empty();
                    $(".container").css('background-image','none');
                    $(".controls-container").remove();
                    showMessage("Î©ÏÎ±Î¹Î±, Î· ÏƒÎºÎ·Î½Î® Î­Ï‡ÎµÎ¹ ÏƒÏ„Î·Î¸ÎµÎ¯. Î’ÏÎ¯ÏƒÎºÎµÏƒÎ±Î¹ ÏƒÏ„Î¿ ÎºÎµÎ½Ï„ÏÎ¹ÎºÏŒ Î¼ÎµÎ½Î¿Ï. Î‘Ï€ÏŒ ÎµÎ´Ï, Î¼Ï€Î¿ÏÎµÎ¯Ï‚ Î½Î± ÎµÎ»Î­Î³Î¾ÎµÎ¹Ï‚ ÏŒÎ»ÎµÏ‚ Ï„Î¹Ï‚ Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¯ÎµÏ‚ Ï„Î·Ï‚ ÏƒÎºÎ·Î½Î®Ï‚.");
                    initialFlag = true;
                    mainMenu();
                }); 
            }
        } else {
            nextPoleCard.hide();
        }
    }

    function hideMessage() {
        $('.message-container').fadeOut();
    }

    function showMessage(text) {
        $('.message').text(text);
        $('.message-container').fadeIn(250);
    }

    function resetPolePosition() {
        currentRotation = 0;
        currentDepth = 0;
        
        poleDiv.css({
            'top': '-1200px',
            'left': '0px',
            'transform': 'rotate(0deg)'
        });
        
        updateAngleDisplay();
        adjustPoleVisibility();
    }

    $(".modButton").click(function() {
        nextPole(mod=true);
    });

    function mainMenu() {
        createWeatherBox();
        $(".container").empty();

        // Container for the buttons
        const buttonsContainer = $('<div>').css({
            'display': 'grid',
            'grid-template-columns': 'repeat(2, 1fr)',
            'gap': '0',
            'place-items': 'center',
            'width': '100%',
            'height': '100%',
            'padding': '4rem',
            'position': 'relative'
        });

        // Menu button labels with PNG icons
        const buttonLabels = [
            { text: 'Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ·ÏƒÎ· Î•Î½Î­ÏÎ³ÎµÎ¹Î±Ï‚', iconSrc: 'thunderbolt.png' },
            { text: 'Î¤Î¿Ï€Î¿Î¸Î­Ï„Î·ÏƒÎ· Î ÏÎ¿ÏƒÏ„Î±Ï„ÎµÏ…Ï„Î¹ÎºÏÎ½ Î Î±Î½Î¹ÏÎ½', iconSrc: 'shield.png' },
            { text: 'Î¡ÏÎ¸Î¼Î¹ÏƒÎ· Î¦Ï‰Ï„Î¹ÏƒÎ¼Î¿Ï', iconSrc: 'lightbulb.png' },
            { text: 'ÎšÎ±Î¹ÏÎ¹ÎºÎ­Ï‚ Î£Ï…Î½Î¸Î®ÎºÎµÏ‚', iconSrc: 'weather.png' },
            { text: 'Î Î»Î¿Î®Î³Î·ÏƒÎ· Î£Îµ ÎšÎ±Ï„Î±Ï†ÏÎ³Î¹Î±', iconSrc: 'shelter.png' },
            { text: 'Î•Ï€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î¯Î± ÎœÎµ Î¥Ï€Î±Î»Î»Î®Î»Î¿Ï…Ï‚', iconSrc: 'support.png' },
            { text: 'Î¤Î¿Ï…ÏÎ¹ÏƒÏ„Î¹ÎºÎ® Î Î»Î¿Î®Î³Î·ÏƒÎ·', iconSrc: 'navigation.png' },
            { text: 'Î ÏÎ¿Î²Î¿Î»Î® Î•Î¾Ï‰Ï„ÎµÏÎ¹ÎºÎ¿Ï Î§ÏÏÎ¿Ï…', iconSrc: 'nature.png' }
        ];

        // Create button wrapper with click handler
        const createButtonWrapper = (labelObj, index) => {
            const wrapper = $('<div>').css({
                'padding': '1.5rem',
                'width': '100%',
                'height': '100%',
                'display': 'flex',
                'justify-content': 'center',
                'align-items': 'center',
                'position': 'relative'
            });

            const button = $('<button>')
                .css({
                    'background-color': '#9A7E6F',
                    'color': 'white',
                    'padding': '30px 40px',
                    'border-radius': '12px',
                    'font-size': '24px',
                    'font-weight': 'bold',
                    'width': '300px',
                    'height': '150px',
                    'text-align': 'left',
                    'cursor': 'pointer',
                    'transition': 'background-color 0.3s ease',
                    'display': 'flex',
                    'align-items': 'center',
                    'gap': '20px'
                })
                .hover(
                    function() { $(this).css('background-color', '#826a5d'); },
                    function() { $(this).css('background-color', '#9A7E6F'); }
                )
                .click(function() {
                    createSubWindow(labelObj.text);
                });

            // Create icon as an img element
            const iconImg = $('<img>')
                .attr('src', labelObj.iconSrc)
                .css({
                    'width': '40px',
                    'height': '40px',
                    'object-fit': 'contain'
                });

            // Create text container
            const textContainer = $('<div>')
                .text(labelObj.text)
                .css({
                    'flex': '1',
                    'line-height': '1.2'
                });

            button.append(iconImg, textContainer);
            wrapper.append(button);
            return wrapper;
        };

        // Add buttons with wrappers
        buttonLabels.forEach((label, index) => {
            buttonsContainer.append(createButtonWrapper(label, index));
        });

        // Borders
        const verticalBorder = $('<div>').css({
            'position': 'absolute',
            'top': '4rem',
            'bottom': '4rem',
            'left': '50%',
            'width': '3px',
            'background-color': '#9A7E6F',
            'transform': 'translateX(-50%)'
        });

        const horizontalBorders = [];
        for (let i = 1; i <= 3; i++) {
            const horizontalBorder = $('<div>').css({
                'position': 'absolute',
                'left': '4rem',
                'right': '4rem',
                'top': i === 1 ? `270px` : i === 2 ? `470px` : '670px',
                'height': '2px',
                'background-color': '#9A7E6F',
                'transform': 'translateY(-50%)'
            });
            horizontalBorders.push(horizontalBorder);
        }

        buttonsContainer.append(verticalBorder);
        horizontalBorders.forEach(border => buttonsContainer.append(border));
        $(".container").append(buttonsContainer);
    }

    function createWeatherBox() {        
        $(".weather-box").show();

        // Style the energy bar Î¼ÏŒÎ½Î¿ Î±Î½ Î´ÎµÎ½ Î­Ï‡ÎµÎ¹ Î®Î´Î· ÏƒÏ„Ï…Î»
        if ($('.energy-bar').css('transition') !== 'width 0.5s ease-in-out') {
            $('.energy-bar').css({
                'width': `${energyLevel}%`,
                'height': '20px',
                'background-color': energyLevel > 66 ? '#FFD700' : // Î§ÏÏ…ÏƒÏŒ
                                  energyLevel > 33 ? '#FFA500' : // Î Î¿ÏÏ„Î¿ÎºÎ±Î»Î¯
                                  '#FF0000', // ÎšÏŒÎºÎºÎ¹Î½Î¿
                'border-radius': '8px',
                'transition': 'width 0.5s ease-in-out'
            });
        }    

        // Temperature calculation based on time
        function calculateTemperature() {
            const hour = currentTime.getHours();
            const baseTemp = 13; // Starting temperature at 8:00

            if (hour >= 8 && hour < 18) {
                // 8:00-18:00: Temperature rises 15 degrees over 10 hours
                const hoursFrom8 = (hour - 8) + (currentTime.getMinutes() / 60);
                const tempIncrease = (15 * hoursFrom8) / 10;
                return baseTemp + tempIncrease;
            } else if (hour >= 18 && hour < 23) {
                // 18:00-23:00: Temperature drops 5 degrees over 5 hours
                const hoursFrom18 = (hour - 18) + (currentTime.getMinutes() / 60);
                const tempDecrease = (5 * hoursFrom18) / 5;
                return (baseTemp + 15) - tempDecrease;
            } else {
                // 23:00-8:00: Temperature drops 10 degrees over 9 hours
                let hoursFrom23;
                if (hour >= 23) {
                    hoursFrom23 = (hour - 23) + (currentTime.getMinutes() / 60);
                } else {
                    hoursFrom23 = (hour + 1) + (currentTime.getMinutes() / 60);
                }
                const tempDecrease = (10 * hoursFrom23) / 9;
                return (baseTemp + 10) - tempDecrease;
            }
        }

        function updateTime() {
            currentTime.setMinutes(currentTime.getMinutes() + 30);
            if (currentTime.getHours() >= 24) {
                currentTime.setHours(currentTime.getHours() - 24);
            }
            $('.time-display').text(currentTime.toLocaleTimeString([], { 
                hour: '2-digit', 
                minute: '2-digit' 
            }));
            
            updateTemperature();
        }

        function updateTemperature() {
            const temp = calculateTemperature();
            $('.temperature-display').text(`Î˜ÎµÏÎ¼Î¿ÎºÏÎ±ÏƒÎ¯Î±: ${temp.toFixed(1)}Â°C`);
        }

        // Random wind alerts between 1-2 minutes
        function scheduleNextWindAlert() {
            const randomDelay = Math.random() * 60000 + 60000; // Random delay between 1-2 minutes
            setTimeout(() => {
                showWindAlert();
                scheduleNextWindAlert(); // Schedule next alert
            }, randomDelay);
        }

        // Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¿ÏÎ¼Îµ Î½Î­Î± intervals Î¼ÏŒÎ½Î¿ Î±Î½ Î´ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ Î®Î´Î·
        if(initialFlag) {
            // Initial updates
            updateTime();
            updateTemperature();
            updateEnergyLevel(); // Initial energy update
            scheduleNextWindAlert();
            
            // Set up intervals
            setInterval(updateTime, 10000); // Update time every 10 seconds
            setInterval(updateEnergyLevel, 1000); // Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· ÎµÎ½Î­ÏÎ³ÎµÎ¹Î±Ï‚ ÎºÎ¬Î¸Îµ 1 Î´ÎµÏ…Ï„ÎµÏÏŒÎ»ÎµÏ€Ï„Î¿
            
            initialFlag = false;
        }   
    }

    function updateTentHealth() {
        // Update the health bar width and color
        $('.health-bar').css({
            'width': tentHealth + '%',
            'background-color': tentHealth > 66 ? '#4CAF50' : // Green
                              tentHealth > 33 ? '#FFA500' : // Orange
                              '#FF0000' // Red
        });
    }

    function updateEnergyLevel() {
        const now = Date.now();
        
        // ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ Î±Î½ Ï€Î­ÏÎ±ÏƒÎµ Î±ÏÎºÎµÏ„ÏŒÏ‚ Ï‡ÏÏŒÎ½Î¿Ï‚ Î±Ï€ÏŒ Ï„Î·Î½ Ï„ÎµÎ»ÎµÏ…Ï„Î±Î¯Î± ÎµÎ½Î·Î¼Î­ÏÏ‰ÏƒÎ·
        if (now - lastEnergyUpdate < ENERGY_UPDATE_INTERVAL) {
            return;
        }
        
        const hour = currentTime.getHours();
        let energyConsumption = devicesOn.length;
        
        // ÎšÎ±Ï„Î¬ Ï„Î· Î´Î¹Î¬ÏÎºÎµÎ¹Î± Ï„Î·Ï‚ Î½ÏÏ‡Ï„Î±Ï‚ (20:00 - 06:00)
        if (hour >= 20 || hour < 6) {
            // ÎœÎµÎ¯Ï‰ÏƒÎ· ÎµÎ½Î­ÏÎ³ÎµÎ¹Î±Ï‚ Î²Î¬ÏƒÎµÎ¹ Ï„Ï‰Î½ ÎµÎ½ÎµÏÎ³ÏÎ½ ÏƒÏ…ÏƒÎºÎµÏ…ÏÎ½
            energyLevel = Math.max(0, energyLevel - energyConsumption);
        } 
        // ÎšÎ±Ï„Î¬ Ï„Î· Î´Î¹Î¬ÏÎºÎµÎ¹Î± Ï„Î·Ï‚ Î·Î¼Î­ÏÎ±Ï‚ (06:00 - 20:00)
        else {
            // Î‘ÏÎ¾Î·ÏƒÎ· 2% Î¼ÎµÎ¯Î¿Î½ Ï„Î·Î½ ÎºÎ±Ï„Î±Î½Î¬Î»Ï‰ÏƒÎ· Ï„Ï‰Î½ ÏƒÏ…ÏƒÎºÎµÏ…ÏÎ½
            energyLevel = Math.min(100, energyLevel + 2 - energyConsumption);
        }

        // Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· Ï„Î¿Ï… energy bar
        $('.energy-bar').css({
            'width': `${energyLevel}%`,
            'background-color': energyLevel > 66 ? '#FFD700' : // Î§ÏÏ…ÏƒÏŒ
                              energyLevel > 33 ? '#FFA500' : // Î Î¿ÏÏ„Î¿ÎºÎ±Î»Î¯
                              '#FF0000' // ÎšÏŒÎºÎºÎ¹Î½Î¿
        });
        
        // Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· Ï„Î¿Ï… Ï‡ÏÏŒÎ½Î¿Ï… Ï„ÎµÎ»ÎµÏ…Ï„Î±Î¯Î±Ï‚ ÎµÎ½Î·Î¼Î­ÏÏ‰ÏƒÎ·Ï‚
        lastEnergyUpdate = now;
    }

    function showWindAlert() {
        const randomDirection = directions[Math.floor(Math.random() * directions.length)];
        const alertElement = $('.wind-alert');
        const windDamage = Math.floor(Math.random() * (15 - 5 + 1)) + 5;
        
        alertElement
            .html(`<strong>Î ÏÎ¿ÎµÎ¹Î´Î¿Ï€Î¿Î¯Î·ÏƒÎ· Î‘Î½Î­Î¼Î¿Ï…!</strong><br>Î™ÏƒÏ‡Ï…ÏÎ¿Î¯ Î¬Î½ÎµÎ¼Î¿Î¹ Ï€Î»Î·ÏƒÎ¹Î¬Î¶Î¿Ï…Î½ Î±Ï€ÏŒ ${randomDirection}<br>Î Î¹Î¸Î±Î½Î® Î¶Î·Î¼Î¹Î¬: ${windDamage}%`)
            .addClass('show');

        setTimeout(() => {
            // Check if the active cover matches the wind direction
            if (activeCoverDirection === randomDirection) {
                showMessage('Î¤Î¿ Ï€ÏÎ¿ÏƒÏ„Î±Ï„ÎµÏ…Ï„Î¹ÎºÏŒ Ï€Î±Î½Î¯ Ï€ÏÎ¿ÏƒÏ„Î¬Ï„ÎµÏˆÎµ Ï„Î· ÏƒÎºÎ·Î½Î® Î±Ï€ÏŒ Ï„Î¿Ï…Ï‚ Î±Î½Î­Î¼Î¿Ï…Ï‚!');
            } else {
                tentHealth = Math.max(0, tentHealth - windDamage);
                updateTentHealth();
                showMessage(`Î— ÏƒÎºÎ·Î½Î® Ï…Ï€Î­ÏƒÏ„Î· Î¶Î·Î¼Î¹Î¬ ${windDamage}% Î±Ï€ÏŒ Ï„Î¿Ï…Ï‚ Î¹ÏƒÏ‡Ï…ÏÎ¿ÏÏ‚ Î±Î½Î­Î¼Î¿Ï…Ï‚!`);
            }
        }, 15000);

        setTimeout(() => {
            alertElement.removeClass('show');
        }, 15000);
    }

    function createSubWindow(title) {
        $(".container").empty();
        $('.message-container').hide();
        
        // Create window container
        const windowContainer = $('<div>').css({
            'width': '100%',
            'height': '100%',
            'padding': '2rem',
            'display': 'flex',
            'flex-direction': 'column',
            'gap': '20px'
        });

        // Create header with back button and title
        const header = $('<div>').css({
            'display': 'flex',
            'align-items': 'center',
            'gap': '20px',
            'padding': '10px 0'
        });

        // Back button
        const backButton = $('<button>')
            .text('â†')
            .css({
                'background-color': '#9A7E6F',
                'color': 'white',
                'padding': '10px 20px',
                'border-radius': '8px',
                'font-size': '24px',
                'font-weight': 'bold',
                'cursor': 'pointer',
                'transition': 'background-color 0.3s ease'
            })
            .hover(
                function() { $(this).css('background-color', '#826a5d'); },
                function() { $(this).css('background-color', '#9A7E6F'); }
            )
            .click(function() {
                showMessage("ÎšÎµÎ½Ï„ÏÎ¹ÎºÏŒ Î¼ÎµÎ½Î¿Ï")
                mainMenu();
            });

        // Title
        const windowTitle = $('<h2>')
            .text(title)
            .css({
                'font-size': '32px',
                'color': '#54473F',
                'margin': '0'
            });

        header.append(backButton, windowTitle);
        windowContainer.append(header);

        // Add content area for future use
        const contentArea = $('<div>').css({
            'flex-grow': '1',
            'background-color': 'rgba(154, 126, 111, 0.1)',
            'border-radius': '12px',
            'padding': '20px'
        });

        if (title === 'Î¤Î¿Ï€Î¿Î¸Î­Ï„Î·ÏƒÎ· Î ÏÎ¿ÏƒÏ„Î±Ï„ÎµÏ…Ï„Î¹ÎºÏÎ½ Î Î±Î½Î¹ÏÎ½') {
            placeProtective(contentArea);
        }else if(title === 'Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ·ÏƒÎ· Î•Î½Î­ÏÎ³ÎµÎ¹Î±Ï‚'){
            energyManagement(contentArea);
        }else if(title === 'ÎšÎ±Î¹ÏÎ¹ÎºÎ­Ï‚ Î£Ï…Î½Î¸Î®ÎºÎµÏ‚'){
            createWeatherChart(contentArea);
        }else if(title === 'Î¡ÏÎ¸Î¼Î¹ÏƒÎ· Î¦Ï‰Ï„Î¹ÏƒÎ¼Î¿Ï'){
            lightSettings(contentArea);
        }else if(title === 'Î Î»Î¿Î®Î³Î·ÏƒÎ· Î£Îµ ÎšÎ±Ï„Î±Ï†ÏÎ³Î¹Î±'){
            navigateToShelter(contentArea);
        }else if(title === 'Î•Ï€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î¯Î± ÎœÎµ Î¥Ï€Î±Î»Î»Î®Î»Î¿Ï…Ï‚'){
            contact(contentArea);
        }else if(title === 'Î¤Î¿Ï…ÏÎ¹ÏƒÏ„Î¹ÎºÎ® Î Î»Î¿Î®Î³Î·ÏƒÎ·'){
            touristNavigation(contentArea);
        }else if(title === 'Î ÏÎ¿Î²Î¿Î»Î® Î•Î¾Ï‰Ï„ÎµÏÎ¹ÎºÎ¿Ï Î§ÏÏÎ¿Ï…'){
            showOutdoorView(contentArea);
        }
    
        windowContainer.append(contentArea);
        $(".container").append(windowContainer);
    }

    function createWeatherChart(contentArea) {

        showMessage('Î”ÎµÎ¯Ï„Îµ Î±Î½Î±Î»Ï…Ï„Î¹ÎºÎ¬ Ï„Î·Î½ Ï€ÏÏŒÎ²Î»ÎµÏˆÎ· ÎºÎ±Î¹ÏÎ¿Ï ÎºÎ±Î¹ Î¸ÎµÏÎ¼Î¿ÎºÏÎ±ÏƒÎ¯Î±Ï‚ Î³Î¹Î± Ï„Î¹Ï‚ ÎµÏ€ÏŒÎ¼ÎµÎ½ÎµÏ‚ ÏÏÎµÏ‚ ÏÏƒÏ„Îµ Î½Î± Ï€ÏÎ¿Î³ÏÎ±Î¼Î¼Î±Ï„Î¯ÏƒÎµÏ„Îµ ÎºÎ±Î»ÏÏ„ÎµÏÎ± Ï„Î¹Ï‚ Î´ÏÎ±ÏƒÏ„Î·ÏÎ¹ÏŒÏ„Î·Ï„Î­Ï‚ ÏƒÎ±Ï‚.');

        const icons = [
            'ğŸŒ¥ï¸','ğŸŒ¥ï¸','â›…','â›…','ğŸŒ¤ï¸','ğŸŒ¤ï¸','â˜€ï¸','â˜€ï¸','â˜€ï¸','â˜€ï¸','ğŸŒ¤ï¸','ğŸŒ¦ï¸','â˜ï¸','â˜ï¸','ğŸŒ§ï¸','ğŸŒ§ï¸','â›ˆï¸','â›ˆï¸','â›ˆï¸','ğŸŒ§ï¸','ğŸŒ™','ğŸŒ™','ğŸŒ™','ğŸŒ¥ï¸'
        ];

        // icons = ['â­', 'ğŸŒ™', 'â˜€ï¸', 'â›…', 'ğŸŒ¤ï¸', 'ğŸŒ¥ï¸', 
        //     'â˜ï¸', 'ğŸŒ¦ï¸', 'ğŸŒ§ï¸', 'â›ˆï¸', 'ğŸŒ©ï¸', 'ğŸŒ¨ï¸',
        //     'ğŸŒªï¸', 'ğŸŒ«ï¸', 'ğŸŒˆ', 'ğŸŒ¡ï¸', 'ğŸ’§', 'â˜”',
        //     'âš¡', 'â„ï¸', 'â˜ƒï¸', 'â›„', 'ğŸŒŠ', 'ğŸŒ']

        const values = [13, 14.5, 16, 17.5, 19, 20.5, 22, 23.5, 25, 26.5, 28, 27, 26, 25, 24, 23, 21.9, 20.8, 19.7, 18.6, 17.5, 16.4, 15.3, 14.1];

        // Create chart container with flex centering
        const chartContainer = $('<div>').css({
            'width': '100%',
            'height': '100%',
            'display': 'flex',
            'flex-direction': 'column',
            'justify-content': 'center',
            'align-items': 'center', // Center horizontally
            'gap': '20px',
            'min-height': '500px'
        });

        // Create scroll container with 50% width
        const scrollContainer = $('<div>').css({
            'width': '50%',
            'overflow-x': 'auto',
            'overflow-y': 'hidden',
            'padding-bottom': '20px', // Space for scrollbar
            'background': '#f5f5f5',
            'border-radius': '15px',
            'border': '3px solid rgb(154, 126, 111)',

        });

        // Create bars container with fixed width for 6 columns
        const graphContainer = $('<div>').css({
            'display': 'flex',
            'justify-content': 'flex-start',
            'align-items': 'flex-end',
            'height': '300px',
            'padding': '20px 20px 20px 0',
            'min-width': 'max-content' // Allows container to grow based on content
        });

        // Find max value for normalization
        const maxValue = Math.max(...values);

        // Calculate width for each bar container
        const barWidth = '100px'; // Fixed width for each bar since we're using 50% container width

        // Create bars
        values.forEach((value, index) => {
            const barContainer = $('<div>').css({
                'display': 'flex',
                'flex-direction': 'column',
                'align-items': 'center',
                'flex': '0 0 auto', // Prevent shrinking and growing
                'width': barWidth,
                'margin': '0 10px'
            });

            // Icon space
            const iconSpace = $('<div>').css({
                'height': '24px',
                'width': '24px',
                'margin-bottom': '8px',
                'display': 'flex',
                'justify-content': 'center',
                'align-items': 'center',
                'font-size': '20px',
                'cursor': 'pointer'
            }).html(icons[index]);

            let hour = (index+8)%24
            let tempOfHour;

            if(hour >= 8 && hour <= 18){
                tempOfHour = (13 + index*1.5).toFixed(1);
            }else if(hour > 18 && hour <= 23){
                tempOfHour = (38 - index).toFixed(1);
            }else{
                tempOfHour = (21.9 - (index-16) * 1.1).toFixed(1);
            }

            const label = $('<div>').css({
                'font-size': '12px',
                'margin-top': '8px',
                'margin-bottom': '4px'
            }).text(`${tempOfHour} Â°C`);

            iconSpace.attr('title', `Î¤Î¹Î¼Î®: ${value}`);

            const height = (value / maxValue) * 200;
            const hue = (value / maxValue) * 120;
            
            const bar = $('<div>').css({
                'width': '100%',
                'height': height + 'px',
                'background': `hsl(${hue}, 70%, 50%)`,
                'transition': 'height 0.3s ease, background 0.3s ease',
                'border-radius': '4px 4px 0 0'
            });

            const label2 = $('<div>').css({
                'font-size': '12px',
                'margin-top': '8px'
            }).text(`${(index+8)%24}:00`);

            // Function to update bar height and color
            function updateBar(newValue) {
                const newHeight = (newValue / maxValue) * 200;
                const newHue = (newValue / maxValue) * 120;
                bar.css({
                    'height': newHeight + 'px',
                    'background': `hsl(${newHue}, 70%, 50%)`
                });
                label2.text(newValue);
                iconSpace.attr('title', `Î¤Î¹Î¼Î®: ${newValue}`);
            }

            barContainer.append(iconSpace, label, bar, label2);
            graphContainer.append(barContainer);

            bar.hover(
                function() { $(this).css('opacity', '0.8'); },
                function() { $(this).css('opacity', '1'); }
            );

            iconSpace.on('click', function() {
                alert(`Î¤Î¹Î¼Î® Î³Î¹Î± ${icons[index]}: ${value}`);
            });
        });

        // Add scrollbar styling
        scrollContainer.css({
            'scrollbar-width': 'thin',
            'scrollbar-color': '#9A7E6F transparent'
        });

        // Webkit scrollbar styling
        const scrollbarCSS = `
            .weather-chart-scroll::-webkit-scrollbar {
                height: 8px;
            }
            .weather-chart-scroll::-webkit-scrollbar-track {
                background: transparent;
            }
            .weather-chart-scroll::-webkit-scrollbar-thumb {
                background-color: #9A7E6F;
                border-radius: 4px;
            }
        `;
        
        // Add CSS to head
        $('<style>')
            .text(scrollbarCSS)
            .appendTo('head');

        scrollContainer.addClass('weather-chart-scroll');
        
        scrollContainer.append(graphContainer);
        chartContainer.append(scrollContainer);
        $(contentArea).append(chartContainer);
    }

    function placeProtective(contentArea) {

        showMessage('Î•Ï€Î¹Î»Î­Î¾Ï„Îµ Ï„Î·Î½ ÎºÎ±Ï„ÎµÏÎ¸Ï…Î½ÏƒÎ· Ï„Î¿Ï€Î¿Î¸Î­Ï„Î·ÏƒÎ·Ï‚ Ï„Î¿Ï… Ï€ÏÎ¿ÏƒÏ„Î±Ï„ÎµÏ…Ï„Î¹ÎºÎ¿Ï Ï€Î±Î½Î¹Î¿Ï Î³Î¹Î± Î½Î± Ï€ÏÎ¿ÏƒÏ„Î±Ï„Î­ÏˆÎµÏ„Îµ Ï„Î· ÏƒÎºÎ·Î½Î® ÏƒÎ±Ï‚ Î±Ï€ÏŒ Ï„Î¿Ï…Ï‚ Î¹ÏƒÏ‡Ï…ÏÎ¿ÏÏ‚ Î±Î½Î­Î¼Î¿Ï…Ï‚.');

        // Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± container Î¼Îµ grid layout
        const container = $('<div>').css({
            'display': 'grid',
            'grid-template-columns': '1fr 1fr',
            'gap': '30px',
            'padding': '20px',
            'height': '100%'
        });

        // Î‘ÏÎ¹ÏƒÏ„ÎµÏÏŒ panel - ÎŸÏ€Ï„Î¹ÎºÎ¿Ï€Î¿Î¯Î·ÏƒÎ· ÏƒÎºÎ·Î½Î®Ï‚
        const visualPanel = $('<div>').css({
            'background-color': 'white',
            'border-radius': '15px',
            'padding': '20px',
            'position': 'relative',
            'display': 'flex',
            'justify-content': 'center',
            'align-items': 'center',
            'box-shadow': '0 4px 6px rgba(0, 0, 0, 0.1)'
        });

        // Î”ÎµÎ¾Î¯ panel - Î Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚ ÎºÎ±Î¹ ÏƒÏ„Î±Ï„Î¹ÏƒÏ„Î¹ÎºÎ¬
        const infoPanel = $('<div>').css({
            'background-color': 'white',
            'border-radius': '15px',
            'padding': '30px',
            'display': 'flex',
            'flex-direction': 'column',
            'gap': '25px',
            'box-shadow': '0 4px 6px rgba(0, 0, 0, 0.1)'
        });

        // Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± ÏƒÎºÎ·Î½Î®Ï‚ Î¼Îµ Ï€Î±Î½Î¹Î¬
        const tent = $('<div>').css({
            'width': '250px',
            'height': '250px',
            'background-color': '#9A7E6F',
            'position': 'relative',
            'border-radius': '10px',
            'background-image': 'url("topdownTent3.png")',
            'background-size': 'cover',
            'background-position': 'center',
            'transition': 'transform 0.3s ease',
            'transform-style': 'preserve-3d',
            'transform': 'perspective(1000px) rotateX(20deg)'
        });

        // Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· ÏƒÎºÎ¹Î¬Ï‚ ÎºÎ¬Ï„Ï‰ Î±Ï€ÏŒ Ï„Î· ÏƒÎºÎ·Î½Î®
        const shadow = $('<div>').css({
            'position': 'absolute',
            'bottom': '-20px',
            'left': '10%',
            'width': '80%',
            'height': '20px',
            'background': 'radial-gradient(ellipse at center, rgba(0,0,0,0.2) 0%, rgba(0,0,0,0) 70%)',
            'border-radius': '50%',
            'transform': 'rotateX(60deg)'
        });
        tent.append(shadow);

        // Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± ÎµÏ€ÎµÎ¾Î·Î³Î·Î¼Î±Ï„Î¹ÎºÎ¿Ï ÎºÎµÎ¹Î¼Î­Î½Î¿Ï…
        const title = $('<h2>').text('Î ÏÎ¿ÏƒÏ„Î±Ï„ÎµÏ…Ï„Î¹ÎºÎ¬ Î Î±Î½Î¹Î¬').css({
            'font-size': '24px',
            'color': '#54473F',
            'margin-bottom': '20px'
        });

        const description = $('<p>').text('Î¤Î¿Ï€Î¿Î¸ÎµÏ„Î®ÏƒÏ„Îµ Ï„Î¿ Ï€ÏÎ¿ÏƒÏ„Î±Ï„ÎµÏ…Ï„Î¹ÎºÏŒ Ï€Î±Î½Î¯ ÏƒÏ„Î·Î½ ÎºÎ±Ï„Î¬Î»Î»Î·Î»Î· Ï€Î»ÎµÏ…ÏÎ¬ Î³Î¹Î± Î½Î± Ï€ÏÎ¿ÏƒÏ„Î±Ï„Î­ÏˆÎµÏ„Îµ Ï„Î· ÏƒÎºÎ·Î½Î® Î±Ï€ÏŒ Ï„Î¿Ï…Ï‚ Î±Î½Î­Î¼Î¿Ï…Ï‚.').css({
            'color': '#666',
            'line-height': '1.6',
            'margin-bottom': '30px'
        });

        // Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± ÎºÎ¿Ï…Î¼Ï€Î¹ÏÎ½ ÎºÎ±Ï„ÎµÏÎ¸Ï…Î½ÏƒÎ·Ï‚ Î¼Îµ ÎµÎ¹ÎºÎ¿Î½Î¯Î´Î¹Î±
        const directions = [
            { name: 'north', icon: 'â†‘', label: 'Î’ÏŒÏÎµÎ¹Î±' },
            { name: 'east', icon: 'â†’', label: 'Î‘Î½Î±Ï„Î¿Î»Î¹ÎºÎ¬' },
            { name: 'south', icon: 'â†“', label: 'ÎÏŒÏ„Î¹Î±' },
            { name: 'west', icon: 'â†', label: 'Î”Ï…Ï„Î¹ÎºÎ¬' }
        ];

        const directionsGrid = $('<div>').css({
            'display': 'grid',
            'grid-template-columns': 'repeat(2, 1fr)',
            'gap': '15px',
            'margin-bottom': '30px'
        });

        directions.forEach(dir => {
            const button = $('<button>')
                .addClass('direction-button')
                .attr('data-direction', dir.name)
                .css({
                    'display': 'flex',
                    'align-items': 'center',
                    'gap': '10px',
                    'padding': '15px 20px',
                    'background-color': activeCoverDirection === dir.name ? '#4CAF50' : 'white',
                    'color': activeCoverDirection === dir.name ? 'white' : '#54473F',
                    'border': '2px solid ' + (activeCoverDirection === dir.name ? '#4CAF50' : '#E0E0E0'),
                    'border-radius': '12px',
                    'cursor': 'pointer',
                    'transition': 'all 0.3s ease',
                    'font-size': '16px',
                    'font-weight': '500',
                    'width': '100%'
                })
                .hover(
                    function() {
                        if (activeCoverDirection !== dir.name) {
                            $(this).css({
                                'background-color': '#F5F5F5',
                                'transform': 'translateY(-2px)'
                            });
                        }
                    },
                    function() {
                        if (activeCoverDirection !== dir.name) {
                            $(this).css({
                                'background-color': 'white',
                                'transform': 'translateY(0)'
                            });
                        }
                    }
                );

            const icon = $('<span>').text(dir.icon).css({
                'font-size': '20px',
                'font-weight': 'bold'
            });

            const label = $('<span>').text(dir.label);

            button.append(icon, label);
            directionsGrid.append(button);
        });

        // Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± status panel
        const statusPanel = $('<div>').css({
            'background-color': '#F8F9FA',
            'border-radius': '12px',
            'padding': '20px',
            'margin-top': 'auto'
        });

        const statusTitle = $('<h3>').text('ÎšÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ· Î ÏÎ¿ÏƒÏ„Î±ÏƒÎ¯Î±Ï‚').css({
            'font-size': '18px',
            'color': '#54473F',
            'margin-bottom': '15px'
        });

        const statusText = $('<p>').text(
            activeCoverDirection 
                ? `Î•Î½ÎµÏÎ³Î® Ï€ÏÎ¿ÏƒÏ„Î±ÏƒÎ¯Î±: ${getDirectionInGreek(activeCoverDirection)} Ï€Î»ÎµÏ…ÏÎ¬` 
                : 'Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡ÎµÎ¹ ÎµÎ½ÎµÏÎ³Î® Ï€ÏÎ¿ÏƒÏ„Î±ÏƒÎ¯Î±'
        ).css({
            'color': '#666',
            'margin-bottom': '10px'
        });

        const windStatus = $('<div>').css({
            'display': 'flex',
            'align-items': 'center',
            'gap': '10px',
            'margin-top': '15px'
        });

        const windIcon = $('<span>').text('ğŸ’¨').css('font-size', '20px');
        const windText = $('<span>').text('Î Î±ÏÎ±ÎºÎ¿Î»Î¿ÏÎ¸Î·ÏƒÎ· Î±Î½Î­Î¼Ï‰Î½ ÎµÎ½ÎµÏÎ³Î®').css('color', '#666');

        windStatus.append(windIcon, windText);
        statusPanel.append(statusTitle, statusText, windStatus);

        // Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± ÎºÎ±Î¹ Ï„Î¿Ï€Î¿Î¸Î­Ï„Î·ÏƒÎ· Ï€ÏÎ¿ÏƒÏ„Î±Ï„ÎµÏ…Ï„Î¹ÎºÏÎ½ Ï€Î±Î½Î¹ÏÎ½
        const coverPositions = [
            { direction: 'north', rotation: 0 },
            { direction: 'east', rotation: 90 },
            { direction: 'south', rotation: 180 },
            { direction: 'west', rotation: 270 }
        ];

        coverPositions.forEach((pos) => {
            const cover = $('<div>')
                .addClass('protective-cover')
                .attr('data-direction', pos.direction)
                .css({
                    'width': '0',
                    'height': '0',
                    'border-left': '25px solid transparent',
                    'border-right': '25px solid transparent',
                    'border-bottom': '50px solid #54473F',
                    'position': 'absolute',
                    'cursor': 'pointer',
                    'transition': 'all 0.3s ease',
                    'opacity': activeCoverDirection === pos.direction ? '1' : '0.3',
                    'border-bottom-color': activeCoverDirection === pos.direction ? '#4CAF50' : '#54473F',
                    'filter': 'drop-shadow(0 2px 4px rgba(0,0,0,0.2))'
                });

            // Î¤Î¿Ï€Î¿Î¸Î­Ï„Î·ÏƒÎ· Ï„Ï‰Î½ Ï€Î±Î½Î¹ÏÎ½
            switch (pos.direction) {
                case 'north':
                    cover.css({
                        'top': '-70px',
                        'left': '50%',
                        'transform': 'translateX(-50%)'
                    });
                    break;
                case 'east':
                    cover.css({
                        'top': '50%',
                        'right': '-70px',
                        'transform': 'translateY(-50%) rotate(90deg)'
                    });
                    break;
                case 'south':
                    cover.css({
                        'bottom': '-70px',
                        'left': '50%',
                        'transform': 'translateX(-50%) rotate(180deg)'
                    });
                    break;
                case 'west':
                    cover.css({
                        'top': '50%',
                        'left': '-70px',
                        'transform': 'translateY(-50%) rotate(270deg)'
                    });
                    break;
            }

            tent.append(cover);
        });

        // Event handlers Î³Î¹Î± Ï„Î± ÎºÎ¿Ï…Î¼Ï€Î¹Î¬ ÎºÎ±Ï„ÎµÏÎ¸Ï…Î½ÏƒÎ·Ï‚
        directionsGrid.find('.direction-button').click(function() {
            const direction = $(this).attr('data-direction');
            const allButtons = directionsGrid.find('.direction-button');
            
            if (activeCoverDirection === direction) {
                // Î‘Ï†Î±Î¯ÏÎµÏƒÎ· ÎµÎ½ÎµÏÎ³Î¿Ï Ï€Î±Î½Î¹Î¿Ï
                activeCoverDirection = null;
                allButtons.css({
                    'background-color': 'white',
                    'color': '#54473F',
                    'border-color': '#E0E0E0'
                });
                tent.find('.protective-cover').css({
                    'opacity': '0.3',
                    'border-bottom-color': '#54473F'
                });
                statusText.text('Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡ÎµÎ¹ ÎµÎ½ÎµÏÎ³Î® Ï€ÏÎ¿ÏƒÏ„Î±ÏƒÎ¯Î±');
                showMessage('Î¤Î¿ Ï€ÏÎ¿ÏƒÏ„Î±Ï„ÎµÏ…Ï„Î¹ÎºÏŒ Ï€Î±Î½Î¯ Î±Ï†Î±Î¹ÏÎ­Î¸Î·ÎºÎµ');
            } else {
                // Î•Î½ÎµÏÎ³Î¿Ï€Î¿Î¯Î·ÏƒÎ· Î½Î­Î¿Ï… Ï€Î±Î½Î¹Î¿Ï
                activeCoverDirection = direction;
                allButtons.css({
                    'background-color': 'white',
                    'color': '#54473F',
                    'border-color': '#E0E0E0'
                });
                $(this).css({
                    'background-color': '#4CAF50',
                    'color': 'white',
                    'border-color': '#4CAF50'
                });
                tent.find('.protective-cover').css({
                    'opacity': '0.3',
                    'border-bottom-color': '#54473F'
                });
                tent.find(`.protective-cover[data-direction="${direction}"]`).css({
                    'opacity': '1',
                    'border-bottom-color': '#4CAF50'
                });
                statusText.text(`Î•Î½ÎµÏÎ³Î® Ï€ÏÎ¿ÏƒÏ„Î±ÏƒÎ¯Î±: ${getDirectionInGreek(direction)} Ï€Î»ÎµÏ…ÏÎ¬`);
                showMessage(`Î¤Î¿ Ï€ÏÎ¿ÏƒÏ„Î±Ï„ÎµÏ…Ï„Î¹ÎºÏŒ Ï€Î±Î½Î¯ Ï„Î¿Ï€Î¿Î¸ÎµÏ„Î®Î¸Î·ÎºÎµ ÏƒÏ„Î·Î½ ${getDirectionInGreek(direction)} Ï€Î»ÎµÏ…ÏÎ¬`);
            }
        });

        // Î£Ï…Î½Î±ÏÎ¼Î¿Î»ÏŒÎ³Î·ÏƒÎ· Ï„Ï‰Î½ panels
        visualPanel.append(tent);
        infoPanel.append(title, description, directionsGrid, statusPanel);
        container.append(infoPanel,visualPanel);
        contentArea.append(container);

        // Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· hover effect ÏƒÏ„Î· ÏƒÎºÎ·Î½Î®
        tent.hover(
            function() {
                $(this).css('transform', 'perspective(1000px) rotateX(25deg) scale(1.02)');
            },
            function() {
                $(this).css('transform', 'perspective(1000px) rotateX(20deg) scale(1)');
            }
        );
    }

    function createCoverIndicator() {
        // Î‘Ï†Î±Î¯ÏÎµÏƒÎ· Ï€ÏÎ¿Î·Î³Î¿ÏÎ¼ÎµÎ½Î¿Ï… indicator Î±Î½ Ï…Ï€Î¬ÏÏ‡ÎµÎ¹
        $('.cover-indicator').remove();
        
        // Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± container Î³Î¹Î± Ï„Î¿ indicator
        const indicatorContainer = $('<div>')
            .addClass('cover-indicator')
            .css({
                'position': 'absolute',
                'top': '50%',
                'left': '50%',
                'transform': 'translate(-50%, -50%)',
                'width': '200px',
                'height': '200px',
                'pointer-events': 'none'
            });

        // Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± indicator Î¼ÏŒÎ½Î¿ Î³Î¹Î± Ï„Î·Î½ ÎµÎ½ÎµÏÎ³Î® ÎºÎ±Ï„ÎµÏÎ¸Ï…Î½ÏƒÎ·
        if (activeCoverDirection) {
            const positions = {
                north: { top: '-60px', left: '50%', transform: 'translateX(-50%)' },
                east: { top: '50%', right: '-60px', transform: 'translateY(-50%) rotate(90deg)' },
                south: { bottom: '-60px', left: '50%', transform: 'translateX(-50%) rotate(180deg)' },
                west: { top: '50%', left: '-60px', transform: 'translateY(-50%) rotate(270deg)' }
            };

            const indicator = $('<div>')
                .addClass('cover-indicator-' + activeCoverDirection)
                .css({
                    'position': 'absolute',
                    'width': '0',
                    'height': '0',
                    'border-left': '20px solid transparent',
                    'border-right': '20px solid transparent',
                    'border-bottom': '40px solid #4CAF50',
                    'opacity': '1',
                    ...positions[activeCoverDirection]
                });
            indicatorContainer.append(indicator);
        }

        return indicatorContainer;
    }

    function updateMainMenuTent() {
        // Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Ï„Î¿Ï… tent Î¼Îµ Ï„Î¿ indicator ÏƒÏ„Î¿ grid
        const tentDiv = $(`#div${tentLocation.toString()}`);
        if (tentDiv.length) {
            const tentSpan = tentDiv.find('span');
            const coverIndicator = createCoverIndicator();
            tentSpan.append(coverIndicator);
        }
    }

    function getDirectionInGreek(direction) {
        const directions = {
            'north': 'Î²ÏŒÏÎµÎ¹Î±',
            'south': 'Î½ÏŒÏ„Î¹Î±',
            'east': 'Î±Î½Î±Ï„Î¿Î»Î¹ÎºÎ®',
            'west': 'Î´Ï…Ï„Î¹ÎºÎ®'
        };
        return directions[direction] || direction;
    }

    function energyManagement(contentArea){

        showMessage('Î•Î´Ï Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Î´Î¹Î±Ï‡ÎµÎ¹ÏÎ¹ÏƒÏ„ÎµÎ¯Ï„Îµ Ï„Î¿ Î±Ï€ÏŒÎ¸ÎµÎ¼Î± ÎµÎ½Î­ÏÎ³ÎµÎ¹Î±Ï‚ Ï„Î·Ï‚ ÏƒÎºÎ·Î½Î®Ï‚ ÏƒÎ±Ï‚. Î•Î½ÎµÏÎ³Î¿Ï€Î¿Î¹Î®ÏƒÏ„Îµ Î® Î±Ï€ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¹Î®ÏƒÏ„Îµ ÏƒÏ…ÏƒÎºÎµÏ…Î­Ï‚ Î³Î¹Î± Î½Î± ÎµÎ¾Î¿Î¹ÎºÎ¿Î½Î¿Î¼Î®ÏƒÎµÏ„Îµ ÎµÎ½Î­ÏÎ³ÎµÎ¹Î±.');

        // Content area logic for energy management
        contentArea.css({
            'display': 'grid',
            'grid-template-columns': '1fr 1fr',
            'gap': '20px'
        });

        // Left panel - Device controls
        const deviceList = $('<div>').css({
            'background-color': 'white',
            'padding': '20px',
            'border-radius': '8px',
            'box-shadow': '0 2px 4px rgba(0,0,0,0.1)',
            'display': 'flex',
            'flex-direction': 'column'
        });

        devices.forEach(device => {
            const deviceRow = $('<div>').css({
                'display': 'flex',
                'align-items': 'center',
                'justify-content': 'space-between',
                'margin-bottom': '15px',
                'padding': '10px',
                'border-bottom': '1px solid #eee'
            });

            const deviceImage = $('<img>').css({
                'width': '60px',
                'height': '60px',
                'object-fit': 'cover',
                'margin-right': '15px',
                'border-radius': '8px',
                'background-color': '#fbfbfb'
            }).attr({
                'src': `${device}.png`, 
                'alt': device + ' image'
            });

            const deviceInfoContainer = $('<div>').css({
                'display': 'flex',
                'align-items': 'center'
            });

            const deviceName = $('<span>').text(device).css({
                'font-size': '18px',
                'color': '#54473F',
                'margin-right': '15px'
            });

            const buttonGroup = $('<div>').css({
                'display': 'flex',
                'gap': '10px'
            });

            const onButton = $('<button>')
                .text('ON')
                .css({
                    'padding': '5px 15px',
                    'border-radius': '4px',
                    'cursor': 'pointer',
                    'transition': 'all 0.3s ease'
                });

            const offButton = $('<button>')
                .text('OFF')
                .css({
                    'padding': '5px 15px',
                    'border-radius': '4px',
                    'cursor': 'pointer',
                    'transition': 'all 0.3s ease',
                    'background-color': '#FF5252',
                    'color': 'white'
                });

            // Set initial button states based on deviceStates
            if (deviceStates[device]) {
                onButton.css({
                    'background-color': '#4CAF50',
                    'color': 'white'
                });
                offButton.css({
                    'background-color': '#f5f5f5',
                    'color': 'black'
                });
            } else {
                onButton.css({
                    'background-color': '#f5f5f5',
                    'color': 'black'
                });
                offButton.css({
                    'background-color': '#FF5252',
                    'color': 'white'
                });
            }

            // Button click handlers
            onButton.click(function() {
                deviceStates[device] = true;

                // Add the device to the global list if not already there
                if (!devicesOn.includes(device)) {
                    devicesOn.push(device);
                }

                onButton.css({
                    'background-color': '#4CAF50',
                    'color': 'white'
                });
                offButton.css({
                    'background-color': '#f5f5f5',
                    'color': 'black'
                });
                updateControlPanel();
            });

            offButton.click(function() {
                deviceStates[device] = false;

                // Remove the device from the global list
                const index = devicesOn.indexOf(device);
                if (index > -1) {
                    devicesOn.splice(index, 1);
                }

                onButton.css({
                    'background-color': '#f5f5f5',
                    'color': 'black'
                });
                offButton.css({
                    'background-color': '#FF5252',
                    'color': 'white'
                });
                updateControlPanel();
            });

            buttonGroup.append(onButton, offButton);
            deviceInfoContainer.append(deviceName);
            
            const deviceRowContent = $('<div>').css({
                'display': 'flex',
                'align-items': 'center',
                'width': '100%'
            });

            deviceRowContent.append(deviceImage, deviceInfoContainer);
            deviceRow.append(deviceRowContent, buttonGroup);
            deviceList.append(deviceRow);
        });

        const saveEnergyButton = $('<button>')
            .text('Î•Î¾Î¿Î¹ÎºÎ¿Î½ÏŒÎ¼Î·ÏƒÎ· Î•Î½Î­ÏÎ³ÎµÎ¹Î±Ï‚')
            .css({
                // 'margin-top': '150px', // Pushes the button to the bottom
                'padding': '10px 15px',
                'background-color': '#2196F3',
                'color': 'white',
                'border': 'none',
                'border-radius': '4px',
                'cursor': 'pointer',
                'transition': 'background-color 0.3s ease',
                'font-size': '16px',
                'font-weight': 'bold',
                'width': '100%'
            })
            .hover(
                function() { $(this).css('background-color', '#1976D2'); },
                function() { $(this).css('background-color', '#2196F3'); }
            )
            .click(function() {
                // Turn off all devices
                devices.forEach(device => {
                    deviceStates[device] = false;
                });

                // Clear the devicesOn array
                devicesOn.length = 0;

                // Update device buttons to reflect off state
                deviceList.find('button').each(function() {
                    const $this = $(this);
                    if ($this.text() === 'ON') {
                        $this.css({
                            'background-color': '#f5f5f5',
                            'color': 'black'
                        });
                    } else if ($this.text() === 'OFF') {
                        $this.css({
                            'background-color': '#FF5252',
                            'color': 'white'
                        });
                    }
                });

                // Update the control panel
                updateControlPanel();
            });
        deviceList.append(saveEnergyButton);

        // Right panel - Control panel
        const controlPanel = $('<div>').css({
            'background-color': 'white',
            'padding': '20px',
            'border-radius': '8px',
            'box-shadow': '0 2px 4px rgba(0,0,0,0.1)'
        });

        const panelTitle = $('<h3>')
            .text('Î›Î¯ÏƒÏ„Î± Î•Î½ÎµÏÎ³ÏÎ½ Î£Ï…ÏƒÎºÎµÏ…ÏÎ½')
            .css({
                'margin-bottom': '20px',
                'color': '#54473F',
                'font-size': '24px'
            });

        const activeDevicesList = $('<div>').css({
            'margin-bottom': '20px'
        });

        const energyConsumption = $('<div>').css({
            'font-size': '18px',
            'color': '#54473F',
            'padding': '15px',
            'background-color': '#f5f5f5',
            'border-radius': '8px',
            'margin-top': '20px'
        });

        controlPanel.append(panelTitle, activeDevicesList, energyConsumption);

        function updateControlPanel() {
            activeDevicesList.empty();

            const activeDevices = Object.entries(deviceStates)
                .filter(([, isActive]) => isActive)
                .map(([device]) => device);
            
            if (activeDevices.length === 0) {
                activeDevicesList.append(
                    $('<p>')
                        .text('ÎšÎ±Î¼Î¯Î± Î•Î½ÎµÏÎ³Î® Î£Ï…ÏƒÎºÎµÏ…Î®')
                        .css({
                            'color': '#666',
                            'font-style': 'italic'
                        })
                );
            } else {
                const deviceList = $('<ul>').css({
                    'list-style-type': 'none',
                    'padding': '0'
                });
                
                activeDevices.forEach(device => {
                    deviceList.append(
                        $('<li>')
                            .text(`â–¶ ${device}`)
                            .css({
                                'margin-bottom': '10px',
                                'color': '#4CAF50'
                            })
                    );
                });
                
                activeDevicesList.append(deviceList);
            }
            
            const consumptionRate = activeDevices.length;
            energyConsumption.text(`ÎšÎ±Ï„Î±Î½Î¬Î»Ï‰ÏƒÎ· ÎµÎ½Î­ÏÎ³ÎµÎ¹Î±Ï‚: ${consumptionRate}% Î±Î½Î¬ Î¼Î¹ÏƒÎ¬Ï‰ÏÎ¿`);
        }

        contentArea.append(deviceList, controlPanel);

        // Initial update
        updateControlPanel();
    }

    function lightSettings(contentArea) {

        showMessage('Î ÏÎ¿ÏƒÎ±ÏÎ¼ÏŒÏƒÏ„Îµ Ï„Î¿ Ï†Ï‰Ï„Î¹ÏƒÎ¼ÏŒ Ï„Î·Ï‚ ÏƒÎºÎ·Î½Î®Ï‚ ÏƒÎ±Ï‚ ÎµÏ€Î¹Î»Î­Î³Î¿Î½Ï„Î±Ï‚ Î±Î½Î¬Î¼ÎµÏƒÎ± ÏƒÎµ Î´Î¹Î±Ï†Î¿ÏÎµÏ„Î¹ÎºÎ¬ Ï€ÏÎ¿Ï†Î¯Î» ÎºÎ±Î¹ ÎµÎ½Ï„Î¬ÏƒÎµÎ¹Ï‚ Î³Î¹Î± Î¼Î­Î³Î¹ÏƒÏ„Î· Î¬Î½ÎµÏƒÎ·.');

        let pulseInterval;
        let currentMode = 'natural';
        let currentColor = '#FFD700';  // Warm yellow default
        let isPulsing = false;
        let pulseSpeed = 1000;
        let currentPreset = null;

        // Configuration objects
        const presetConfigs = {
            'Î”Î¹Î¬Î²Î±ÏƒÎ¼Î±': {
                color: '#FFF5E1',
                brightness: 85,
                isPulsing: false
            },
            'Î§Î±Î»Î¬ÏÏ‰ÏƒÎ·': {
                color: '#E6E6FA',
                brightness: 40,
                isPulsing: false
            },
            'Î¤Î±Î¹Î½Î¯Î±': {
                color: '#4169E1',
                brightness: 30,
                isPulsing: false
            },
            'Î Î¬ÏÏ„Ï…': {
                color: '#FF69B4',
                brightness: 90,
                isPulsing: true,
                pulseSpeed: 500
            }
        };

        // Main container setup
        contentArea.css({
            'display': 'grid',
            'grid-template-columns': '1fr 1fr',
            'gap': '30px',
            'height': '100%',
            'padding': '30px',
            'background-color': 'rgba(154, 126, 111, 0.1)'
        });

        // Create and append main panels
        const controlPanel = createControlPanel();
        const previewPanel = createPreviewPanel();
        contentArea.append(controlPanel, previewPanel);

        // Initial preview update
        updatePreview();

        // Panel Creation Functions
        function createControlPanel() {
            const panel = $('<div>').css({
                'background-color': 'white',
                'padding': '30px',
                'border-radius': '20px',
                'box-shadow': '0 4px 20px rgba(0,0,0,0.08)',
                'display': 'flex',
                'flex-direction': 'column',
                'gap': '25px'
            });

            // Create sections
            const modeSection = createModeSection();
            const brightnessSection = createBrightnessSection();
            const presetSection = createPresetSection();
            const effectsSection = createEffectsSection();

            // Assemble panel
            panel.append(modeSection, brightnessSection, presetSection, effectsSection);
            return panel;
        }

        function createModeSection() {
            const section = $('<div>').css({
                'display': 'flex',
                'flex-direction': 'column',
                'gap': '15px'
            });

            const title = $('<h3>')
                .text('Î›ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¯Î± Î¦Ï‰Ï„Î¹ÏƒÎ¼Î¿Ï')
                .css({
                    'margin': '0',
                    'color': '#212529',
                    'font-size': '18px'
                });

            const modes = [
                { name: 'Î¦Ï…ÏƒÎ¹ÎºÏŒ', icon: 'â˜€ï¸', value: 'natural', color: '#FFD700' },
                { name: 'Î–ÎµÏƒÏ„ÏŒ', icon: 'ğŸŒ…', value: 'warm', color: '#FFA500' },
                { name: 'Î¨Ï…Ï‡ÏÏŒ', icon: 'â„ï¸', value: 'cool', color: '#87CEEB' }
            ];

            const modeButtons = $('<div>').css({
                'display': 'grid',
                'grid-template-columns': 'repeat(3, 1fr)',
                'gap': '10px'
            });

            modes.forEach(mode => {
                const button = $('<button>')
                    .css({
                        'display': 'flex',
                        'flex-direction': 'column',
                        'align-items': 'center',
                        'gap': '8px',
                        'padding': '15px',
                        'background-color': 'white',
                        'border': '2px solid #e9ecef',
                        'border-radius': '12px',
                        'cursor': 'pointer',
                        'transition': 'all 0.3s ease'
                    })
                    .hover(
                        function() { $(this).css('transform', 'translateY(-2px)'); },
                        function() { $(this).css('transform', 'translateY(0)'); }
                    );

                const icon = $('<span>').text(mode.icon).css('font-size', '24px');
                const text = $('<span>').text(mode.name).css('font-weight', '500');

                button.append(icon, text);

                button.click(function() {
                    modeButtons.find('button').css({
                        'background-color': 'white',
                        'border-color': '#e9ecef'
                    });
                    $(this).css({
                        'background-color': `${mode.color}20`,
                        'border-color': mode.color
                    });
                    currentMode = mode.value;
                    currentColor = mode.color;
                    currentPreset = null;
                    updatePreview();
                });

                modeButtons.append(button);
            });

            section.append(title, modeButtons);
            return section;
        }

        function createBrightnessSection() {
            const section = $('<div>').css({
                'display': 'flex',
                'flex-direction': 'column',
                'gap': '15px'
            });

            const header = $('<div>').css({
                'display': 'flex',
                'justify-content': 'space-between',
                'align-items': 'center'
            });

            const title = $('<div>').css({
                'display': 'flex',
                'align-items': 'center',
                'gap': '10px'
            }).append(
                $('<span>').text('ğŸ’¡').css('font-size', '20px'),
                $('<span>').text('Î¦Ï‰Ï„ÎµÎ¹Î½ÏŒÏ„Î·Ï„Î±').css({
                    'font-weight': '500',
                    'color': '#212529'
                })
            );

            const value = $('<span>')
                .text('100%')
                .css({
                    'color': '#868e96',
                    'font-weight': '500'
                })
                .addClass('brightness-value');

            const slider = $('<input>')
                .attr({
                    'type': 'range',
                    'min': '0',
                    'max': '100',
                    'value': '100',
                    'id': 'brightnessSlider'
                })
                .css({
                    'width': '100%',
                    'height': '6px',
                    'accent-color': '#FFD700'
                })
                .on('input', function() {
                    value.text($(this).val() + '%');
                    updatePreview();
                });

            header.append(title, value);
            section.append(header, slider);
            return section;
        }

        function createPresetSection() {
            const section = $('<div>').css({
                'display': 'flex',
                'flex-direction': 'column',
                'gap': '15px'
            });

            const title = $('<div>').css({
                'display': 'flex',
                'align-items': 'center',
                'gap': '10px'
            }).append(
                $('<span>').text('ğŸ­').css('font-size', '20px'),
                $('<span>').text('Î ÏÎ¿ÎµÏ€Î¹Î»Î¿Î³Î­Ï‚').css({
                    'font-weight': '500',
                    'color': '#212529'
                })
            );

            const presets = [
                { name: 'Î”Î¹Î¬Î²Î±ÏƒÎ¼Î±', icon: 'ğŸ“š' },
                { name: 'Î§Î±Î»Î¬ÏÏ‰ÏƒÎ·', icon: 'ğŸŒ™' },
                { name: 'Î¤Î±Î¹Î½Î¯Î±', icon: 'ğŸ¬' },
                { name: 'Î Î¬ÏÏ„Ï…', icon: 'âœ¨' }
            ];

            const grid = $('<div>').css({
                'display': 'grid',
                'grid-template-columns': 'repeat(2, 1fr)',
                'gap': '10px'
            });

            presets.forEach(preset => {
                const button = $('<button>')
                    .css({
                        'display': 'flex',
                        'align-items': 'center',
                        'gap': '10px',
                        'padding': '12px 15px',
                        'background-color': 'white',
                        'border': '2px solid #e9ecef',
                        'border-radius': '12px',
                        'cursor': 'pointer',
                        'transition': 'all 0.3s ease'
                    })
                    .hover(
                        function() { $(this).css('transform', 'translateY(-2px)'); },
                        function() { $(this).css('transform', 'translateY(0)'); }
                    );

                const icon = $('<span>').text(preset.icon).css('font-size', '20px');
                const text = $('<span>').text(preset.name).css('font-weight', '500');

                button.append(icon, text);
                button.click(function() {
                    const config = presetConfigs[preset.name];
                    currentPreset = preset.name;
                    currentColor = config.color;
                    $('#brightnessSlider').val(config.brightness);
                    $('.brightness-value').text(config.brightness + '%');
                    isPulsing = config.isPulsing;
                    if (config.pulseSpeed) pulseSpeed = config.pulseSpeed;
                    updatePreview();
                });

                grid.append(button);
            });

            section.append(title, grid);
            return section;
        }

        function createEffectsSection() {
            const section = $('<div>').css({
                'display': 'flex',
                'flex-direction': 'column',
                'gap': '15px'
            });

            const title = $('<div>').css({
                'display': 'flex',
                'align-items': 'center',
                'gap': '10px'
            }).append(
                $('<span>').text('âœ¨').css('font-size', '20px'),
                $('<span>').text('Effects').css({
                    'font-weight': '500',
                    'color': '#212529'
                })
            );

            const pulseButton = $('<button>')
                .text('Î Î±Î»Î»ÏŒÎ¼ÎµÎ½Î¿Ï‚ Î¦Ï‰Ï„Î¹ÏƒÎ¼ÏŒÏ‚')
                .css({
                    'padding': '12px 20px',
                    'background-color': 'white',
                    'border': '2px solid #e9ecef',
                    'border-radius': '12px',
                    'cursor': 'pointer',
                    'font-weight': '500',
                    'transition': 'all 0.3s ease'
                })
                .click(function() {
                    isPulsing = !isPulsing;
                    $(this).css({
                        'background-color': isPulsing ? '#FFD70020' : 'white',
                        'border-color': isPulsing ? '#FFD700' : '#e9ecef'
                    });
                    updatePreview();
                });

            section.append(title, pulseButton);
            return section;
        }

        function createPreviewPanel() {
            const panel = $('<div>').css({
                'background-color': 'white',
                'border-radius': '20px',
                'box-shadow': '0 4px 20px rgba(0,0,0,0.08)',
                'position': 'relative',
                'height': '100%',
                'overflow': 'hidden'
            });

            const previewBox = $('<div>').css({
                'position': 'absolute',
                'top': '0',
                'left': '0',
                'right': '0',
                'bottom': '0',
                'background-image': 'url("forrestBackground3.png")',
                'background-size': '100% 100%', // This will stretch the image both horizontally and vertically
                'background-position': 'center'
            });

            // Î¤Î¿ ÎµÏ†Î­ Ï†Ï‰Ï„Î¹ÏƒÎ¼Î¿Ï
            const lightEffect = $('<div>')
                .addClass('light-effect')
                .css({
                    'position': 'absolute',
                    'width': '200px',
                    'height': '200px',
                    'left': '48%',
                    'top': '58%',
                    'transform': 'translate(-50%, -50%)',
                    'border-radius': '50%',
                    'filter': 'blur(50px)',
                    'transition': 'all 0.3s ease',
                    'mix-blend-mode': 'screen',
                    'z-index': '2'
                });

            previewBox.append(lightEffect);
            panel.append(previewBox);

            return panel;
        }

        function updatePreview() {
            const brightness = $('#brightnessSlider').val();
            const lightEffect = $('.light-effect');
            const darkOverlay = $('.dark-overlay');

            if (pulseInterval) {
                clearInterval(pulseInterval);
            }

            // Î ÏÎ¿ÏƒÎ±ÏÎ¼Î¿Î³Î® Ï„Î¿Ï… ÏƒÎºÎ¿Ï„ÎµÎ¹Î½Î¿Ï overlay Î²Î¬ÏƒÎµÎ¹ brightness
            darkOverlay.css({
                'background-color': `rgba(0, 0, 0, ${Math.max(0.3, 1 - brightness/100)})`
            });

            let overlayStyle = {
                'background-color': currentColor,
                'opacity': brightness / 100,
                'box-shadow': `0 0 50px 25px ${currentColor}`
            };

            lightEffect.css({
                'background-color': overlayStyle['background-color'],
                'opacity': overlayStyle['opacity'],
                'transform': 'scale(1)',
                'box-shadow': overlayStyle['box-shadow']
            });

            if (isPulsing) {
                let isExpanded = false;
                pulseInterval = setInterval(() => {
                    isExpanded = !isExpanded;
                    lightEffect.css({
                        'opacity': isExpanded ? overlayStyle['opacity'] * 0.5 : overlayStyle['opacity'],
                        'transform': `scale(${isExpanded ? 1.2 : 1})`,
                        'box-shadow': isExpanded ? 
                            `0 0 70px 35px ${currentColor}` : 
                            `0 0 50px 25px ${currentColor}`
                    });
                }, pulseSpeed);
            }
        }
    }

    function navigateToShelter(contentArea) {
        $(contentArea).css({
            'background-image': 'url("map2.jpg")',
            'background-size': 'cover',
            'background-position': 'center',
            'width': '100%',
            'height': '100%',
            'z-index': '1',
            'position': 'relative',
            'padding': '0px'
        }).attr('id', 'navMap');

        createGrid(contentArea);
        
        // After grid is created, find and draw path
        const path = findPath(tentLocation, shelterLocation);
        if (path) {
            // Draw the optimal path in green
            drawPath(path);
            
            // Draw the direct line in red
            drawDirectLine();
            
            showMessage("Î’ÏÎ­Î¸Î·ÎºÎµ Ï„Î¿ ÏƒÏ…Î½Ï„Î¿Î¼ÏŒÏ„ÎµÏÎ¿ Î¼Î¿Î½Î¿Ï€Î¬Ï„Î¹ Ï€ÏÎ¿Ï‚ Ï„Î¿ ÎºÎ±Ï„Î±Ï†ÏÎ³Î¹Î¿! Î— Ï€ÏÎ¬ÏƒÎ¹Î½Î· Î³ÏÎ±Î¼Î¼Î® Î´ÎµÎ¯Ï‡Î½ÎµÎ¹ Ï„Î¿ Î±ÏƒÏ†Î±Î»Î­Ï‚ Î¼Î¿Î½Î¿Ï€Î¬Ï„Î¹, ÎµÎ½Ï Î· ÎºÏŒÎºÎºÎ¹Î½Î·, Ï„Î·Î½ ÏƒÏ…Î½Ï„Î¿Î¼ÏŒÏ„ÎµÏÎ· Î´Î¹Î±Î´ÏÎ¿Î¼Î®.");
        } else {
            showMessage("Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎµ Î´Î¹Î±Î¸Î­ÏƒÎ¹Î¼Î¿ Î¼Î¿Î½Î¿Ï€Î¬Ï„Î¹ Ï€ÏÎ¿Ï‚ Ï„Î¿ ÎºÎ±Ï„Î±Ï†ÏÎ³Î¹Î¿.");
        }
    }

    function drawDirectLine() {
        setTimeout(() => {
            const navMap = $('#navMap');
            
            // Get tent and shelter positions
            const tentCell = $(`#div${tentLocation}`);
            const shelterCell = $(`#div${shelterLocation}`);
            
            const tentPos = tentCell.position();
            const shelterPos = shelterCell.position();
            
            // Calculate center points
            const startX = tentPos.left + tentCell.width()/2;
            const startY = tentPos.top + tentCell.height()/2;
            const endX = shelterPos.left + shelterCell.width()/2;
            const endY = shelterPos.top + shelterCell.height()/2;
            
            // Calculate midpoint for image placement
            const midX = (startX + endX) / 2;
            const midY = (startY + endY) / 2;
            
            // Create direct line
            const directLine = $('<div>').addClass('direct-line').css({
                'position': 'absolute',
                'height': '6px',
                'background-color': '#FF4444',
                'transform-origin': 'left center',
                'z-index': '999',
                'box-shadow': '0 0 8px rgba(255, 68, 68, 0.5)',
                'animation': 'directLinePulse 2s infinite'
            });
            
            // Calculate line length and angle
            const length = Math.sqrt(Math.pow(endX - startX, 2) + Math.pow(endY - startY, 2));
            const angle = Math.atan2(endY - startY, endX - startX) * 180 / Math.PI;
            
            directLine.css({
                'width': `${length}px`,
                'left': `${startX}px`,
                'top': `${startY}px`,
                'transform': `rotate(${angle}deg)`
            });
            
            // Create container for image
            const imageContainer = $('<div>').addClass('distance-image-container').css({
                'position': 'absolute',
                'left': `${midX - 25}px`, // Adjust based on image size
                'top': `${midY - 25}px`, // Adjust based on image size
                'z-index': '1000',
                'background-color': 'white',
                'border-radius': '50%',
                'padding': '5px',
                'box-shadow': '0 0 10px rgba(0,0,0,0.2)',
                'display': 'flex',
                'justify-content': 'center',
                'align-items': 'center',
                'width': '50px',
                'height': '50px'
            });

            // Create image element
            const image = $('<img>').attr({
                'src': 'thunder.png',
                'alt': 'Thunder Icon'
            }).css({
                'width': '50px',
                'height': '50px',
                'object-fit': 'contain'
            });

            // Add keyframe animation for the direct line
            const keyframeStyle = `
                @keyframes directLinePulse {
                    0% { opacity: 0.3; }
                    50% { opacity: 0.8; }
                    100% { opacity: 0.3; }
                }
                @keyframes floatAnimation {
                    0% { transform: translateY(0px); }
                    50% { transform: translateY(-5px); }
                    100% { transform: translateY(0px); }
                }
            `;
            
            // Add the keyframe style if it doesn't exist
            if (!$('style:contains(directLinePulse)').length) {
                $('<style>').text(keyframeStyle).appendTo('head');
            }

            // Add floating animation to image container
            imageContainer.css('animation', 'floatAnimation 2s ease-in-out infinite');
            
            // Append elements
            imageContainer.append(image);
            navMap.append(directLine, imageContainer);
        }, 100);
    }

    function getNeighbors(cell) {
        // const connections = [
        //     ['11', '12'], ['12', '13'], 
        //     ['13', '22'], ['21', '22'],
        //     ['22', '23'], ['23', '33'],
        //     ['33', '32'], ['31', '32']
        // ];

        const connections = [
            ['11', '21'], ['21', '22'], 
            ['12', '22'], ['12', '13'],
            ['23', '13'], ['23', '33'],
            ['32', '22'], ['31', '32']
        ];
        
        return connections.filter(conn => 
            conn.includes(cell)).map(conn => 
            conn[0] === cell ? conn[1] : conn[0]);
    }

    function findPath(start, end) {
        const queue = [[start]];
        const visited = new Set([start]);
        
        while (queue.length > 0) {
            const path = queue.shift();
            const currentCell = path[path.length - 1];
            
            if (currentCell === end) {
                return path;
            }
            
            const neighbors = getNeighbors(currentCell);
            for (const neighbor of neighbors) {
                if (!visited.has(neighbor)) {
                    visited.add(neighbor);
                    queue.push([...path, neighbor]);
                }
            }
        }
        return null;
    }

    function drawPath(path) {
        // Remove existing paths
        $('.path-line').remove();
        
        if (!path) return;

        // Wait for a brief moment to ensure DOM is rendered
        setTimeout(() => {
            const gridContainer = $('.gridDiv');
            const navMap = $('#navMap');
            
            for (let i = 0; i < path.length - 1; i++) {
                const start = path[i];
                const end = path[i + 1];
                
                // Get cell positions relative to the grid
                const startCell = $(`#div${start}`);
                const endCell = $(`#div${end}`);
                
                const startPos = startCell.position();
                const endPos = endCell.position();
                
                // Calculate center points
                const startX = startPos.left + startCell.width()/2;
                const startY = startPos.top + startCell.height()/2;
                const endX = endPos.left + endCell.width()/2;
                const endY = endPos.top + endCell.height()/2;
                
                // Create path line
                const line = $('<div>').addClass('path-line').css({
                    'position': 'absolute',
                    'height': '6px',
                    'background-color': '#4CAF50',
                    'transform-origin': 'left center',
                    'z-index': '1000'
                });
                
                // Calculate line length and angle
                const length = Math.sqrt(Math.pow(endX - startX, 2) + Math.pow(endY - startY, 2));
                const angle = Math.atan2(endY - startY, endX - startX) * 180 / Math.PI;
                
                line.css({
                    'width': `${length}px`,
                    'left': `${startX}px`,
                    'top': `${startY}px`,
                    'transform': `rotate(${angle}deg)`
                });
                
                navMap.append(line);
            }
        }, 100);
    }

    function contact(contentArea) {

        showMessage('Î Î±ÏÎ±Î³Î³ÎµÎ¯Î»Ï„Îµ Ï†Î±Î³Î·Ï„ÏŒ Î® ÎµÎ½Î·Î¼ÎµÏÏ‰Î¸ÎµÎ¯Ï„Îµ Î³Î¹Î± Ï„Î¹Ï‚ Ï€ÏÎ¿Î³ÏÎ±Î¼Î¼Î±Ï„Î¹ÏƒÎ¼Î­Î½ÎµÏ‚ ÎµÎºÎ´Î·Î»ÏÏƒÎµÎ¹Ï‚.');

        const buttonContainer = $('<div>').css({
            'display': 'flex',
            'gap': '30px',
            'justify-content': 'center',
            'align-items': 'center',
            'height': '100%'
        });

        const buttons = [
            { text: 'Î Î±ÏÎ±Î³Î³ÎµÎ¯Î»Ï„Îµ Î¦Î±Î³Î·Ï„ÏŒ', image: 'dish.png', action: showFoodOrder },
            { text: 'Î ÏÎ¿ÏƒÎµÏ‡ÎµÎ¯Ï‚ Î•ÎºÎ´Î·Î»ÏÏƒÎµÎ¹Ï‚', image: 'event.png', action: showEvents }
        ];

        buttons.forEach(button => {
            const btn = $('<button>').css({
                'display': 'flex',
                'align-items': 'center',
                'gap': '15px',
                'padding': '25px 40px',
                'background-color': '#9A7E6F',
                'color': 'white',
                'border': 'none',
                'border-radius': '12px',
                'font-size': '24px',
                'font-weight': 'bold',
                'cursor': 'pointer',
                'transition': 'all 0.3s ease',
                'width': '400px'
            })
            .hover(
                function() { 
                    $(this).css({
                        'background-color': '#826a5d',
                        'transform': 'translateY(-2px)'
                    }); 
                },
                function() { 
                    $(this).css({
                        'background-color': '#9A7E6F',
                        'transform': 'translateY(0)'
                    }); 
                }
            );

            const img = $('<img>')
                .attr('src', button.image)
                .css({
                    'width': '40px',
                    'height': '40px',
                    'object-fit': 'contain'
                });
                
            const text = $('<span>').text(button.text);

            btn.append(img, text);
            if (button.action) {
                btn.click(button.action);
            }
            buttonContainer.append(btn);
        });

        contentArea.append(buttonContainer);
    }

    function showFoodOrder() {
        $(".container").empty();
        const windowContainer = $('<div>').css({
            'width': '100%',
            'height': '100%',
            'padding': '2rem',
            'display': 'flex',
            'flex-direction': 'column',
            'gap': '20px'
        });

        // Header
        const header = $('<div>').css({
            'display': 'flex',
            'align-items': 'center',
            'gap': '20px',
            'padding': '10px 0'
        });

        const backButton = $('<button>')
            .text('â†')
            .css({
                'background-color': '#9A7E6F',
                'color': 'white',
                'padding': '10px 20px',
                'border-radius': '8px',
                'font-size': '24px',
                'font-weight': 'bold',
                'cursor': 'pointer',
                'transition': 'background-color 0.3s ease'
            })
            .hover(
                function() { $(this).css('background-color', '#826a5d'); },
                function() { $(this).css('background-color', '#9A7E6F'); }
            )
            .click(function() {
                createSubWindow('Î•Ï€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î¯Î± ÎœÎµ Î¥Ï€Î±Î»Î»Î®Î»Î¿Ï…Ï‚');
            });

        const windowTitle = $('<h2>')
            .text('Î Î±ÏÎ±Î³Î³ÎµÎ¯Î»Ï„Îµ Î¦Î±Î³Î·Ï„ÏŒ')
            .css({
                'font-size': '32px',
                'color': '#54473F',
                'margin': '0'
            });

        header.append(backButton, windowTitle);
        windowContainer.append(header);

        // Panels Container
        const panelsContainer = $('<div>').css({
            'display': 'grid',
            'grid-template-columns': '1fr 3fr',
            'gap': '30px',
            'height': 'calc(100% - 80px)',
            'margin-top': '20px'
        });

        // Left Panel
        const leftPanel = $('<div>').css({
            'background-color': 'white',
            'border-radius': '15px',
            'padding': '20px',
            'box-shadow': '0 4px 6px rgba(0, 0, 0, 0.1)',
            'height': '100%',
            'overflow-y': 'auto'
        });

        // Create menu list
        const menuList = $('<div>').css({
            'display': 'flex',
            'flex-direction': 'column',
            'gap': '20px'
        });

        // Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Ï„Î¿Ï… style Î³Î¹Î± Ï„Î¿ scrollbar Î¼ÏŒÎ½Î¿ Î¼Î¯Î± Ï†Î¿ÏÎ¬
        if (!$('style:contains(menu-items-list)').length) {
            const scrollbarStyle = `
                .menu-items-list::-webkit-scrollbar {
                    width: 8px;
                }
                .menu-items-list::-webkit-scrollbar-track {
                    background: transparent;
                }
                .menu-items-list::-webkit-scrollbar-thumb {
                    background-color: #9A7E6F;
                    border-radius: 4px;
                }
            `;
            $('<style>').text(scrollbarStyle).appendTo('head');
        }

        const categories = [
            { 
                name: 'Î ÏÏ‰Î¹Î½ÏŒ (06:00-12:00)', 
                items: [
                    {
                        name: 'ÎŸÎ¼ÎµÎ»Î­Ï„Î± Î¼Îµ Ï„Ï…ÏÎ¯',
                        image: 'egg.png',
                        description: 'Î‘Ï†ÏÎ¬Ï„Î· Î¿Î¼ÎµÎ»Î­Ï„Î± Î¼Îµ Ï„Ï…ÏÎ¯ Î³ÏÎ±Î²Î¹Î­ÏÎ± ÎºÎ±Î¹ Ï†ÏÎ­ÏƒÎºÎ± Î¼Ï…ÏÏ‰Î´Î¹ÎºÎ¬'
                    },
                    {
                        name: 'Continental Breakfast',
                        image: 'continental.png',
                        description: 'ÎšÎ±Ï†Î­Ï‚, Ï‡Ï…Î¼ÏŒÏ‚, ÎºÏÎ¿Ï…Î±ÏƒÎ¬Î½, Î¼Î±ÏÎ¼ÎµÎ»Î¬Î´Î± ÎºÎ±Î¹ Î²Î¿ÏÏ„Ï…ÏÎ¿'
                    },
                    {
                        name: 'Î“Î¹Î±Î¿ÏÏÏ„Î¹ Î¼Îµ Î¼Î­Î»Î¹ ÎºÎ±Î¹ ÎºÎ±ÏÏÎ´Î¹Î±',
                        image: 'yogurt.png',
                        description: 'Î•Î»Î»Î·Î½Î¹ÎºÏŒ Î³Î¹Î±Î¿ÏÏÏ„Î¹ Î¼Îµ Î¸Ï…Î¼Î±ÏÎ¯ÏƒÎ¹Î¿ Î¼Î­Î»Î¹, ÎºÎ±ÏÏÎ´Î¹Î± ÎºÎ±Î¹ Ï†ÏÎ­ÏƒÎºÎ± Ï†ÏÎ¿ÏÏ„Î±'
                    }
                ]
            },
            { 
                name: 'ÎœÎµÏƒÎ·Î¼ÎµÏÎ¹Î±Î½ÏŒ (12:00-18:00)', 
                items: [
                    {
                        name: 'ÎœÎ¿ÏƒÏ‡Î±ÏÎ¯ÏƒÎ¹Î± Î¼Ï€ÏÎ¹Î¶ÏŒÎ»Î± Î¼Îµ Ï€Î±Ï„Î¬Ï„ÎµÏ‚',
                        image: 'meatSteak.png',
                        description: 'Î–Î¿Ï…Î¼ÎµÏÎ® Î¼Ï€ÏÎ¹Î¶ÏŒÎ»Î± Î¼Îµ Ï€Î±Ï„Î¬Ï„ÎµÏ‚ Ï†Î¿ÏÏÎ½Î¿Ï… ÎºÎ±Î¹ ÏƒÎ¬Î»Ï„ÏƒÎ± Î¼Î±Î½Î¹Ï„Î±ÏÎ¹ÏÎ½'
                    },
                    {
                        name: 'Î£Î±Î»Î¬Ï„Î± Ï„Î¿Ï… Î£ÎµÏ†',
                        image: 'salad.png',
                        description: 'Î¦ÏÎ­ÏƒÎºÎ± Î»Î±Ï‡Î±Î½Î¹ÎºÎ¬, Ï„Ï…ÏÎ¯, Î¶Î±Î¼Ï€ÏŒÎ½ ÎºÎ±Î¹ ÏƒÏ‰Ï‚ vinaigrette'
                    },
                    {
                        name: 'ÎšÎ¿Ï„ÏŒÏ€Î¿Ï…Î»Î¿ ÏƒÏ„Î· ÏƒÏ‡Î¬ÏÎ±',
                        image: 'chicken.png',
                        description: 'Î£Ï„Î®Î¸Î¿Ï‚ ÎºÎ¿Ï„ÏŒÏ€Î¿Ï…Î»Î¿Ï… Î¼Î±ÏÎ¹Î½Î±ÏÎ¹ÏƒÎ¼Î­Î½Î¿ Î¼Îµ Î¼Ï…ÏÏ‰Î´Î¹ÎºÎ¬, Ï€Î±Ï„Î¬Ï„ÎµÏ‚ Ï†Î¿ÏÏÎ½Î¿Ï… ÎºÎ±Î¹ ÏƒÎ±Î»Î¬Ï„Î±'
                    }
                ]
            },
            { 
                name: 'Î’ÏÎ±Î´Î¹Î½ÏŒ (18:00-24:00)', 
                items: [
                    {
                        name: 'Î£Î¿Î»Î¿Î¼ÏŒÏ‚ Î¼Îµ ÏÏÎ¶Î¹ ÎºÎ±Î¹ Î»Î±Ï‡Î±Î½Î¹ÎºÎ¬',
                        image: 'salmon.png',
                        description: 'Î¦ÏÎ­ÏƒÎºÎ¿Ï‚ ÏƒÎ¿Î»Î¿Î¼ÏŒÏ‚ ÏƒÏ‡Î¬ÏÎ±Ï‚ Î¼Îµ ÏÏÎ¶Î¹ basmati ÎºÎ±Î¹ Î»Î±Ï‡Î±Î½Î¹ÎºÎ¬ ÎµÏ€Î¿Ï‡Î®Ï‚'
                    },
                    {
                        name: 'Î¡Î¹Î¶ÏŒÏ„Î¿ ÎœÎ±Î½Î¹Ï„Î±ÏÎ¹ÏÎ½',
                        image: 'risotto.png',
                        description: 'ÎšÏÎµÎ¼ÏÎ´ÎµÏ‚ ÏÎ¹Î¶ÏŒÏ„Î¿ Î¼Îµ Î´Î¹Î¬Ï†Î¿ÏÎ± Î¼Î±Î½Î¹Ï„Î¬ÏÎ¹Î± ÎºÎ±Î¹ Ï€Î±ÏÎ¼ÎµÎ¶Î¬Î½Î±'
                    },
                                        {
                        name: 'Î Î­Î½Î½ÎµÏ‚ Î‘ÏÎ±Î¼Ï€Î¹Î¬Ï„Î±',
                        image: 'pennes.png',
                        description: 'Î–Ï…Î¼Î±ÏÎ¹ÎºÎ¬ Î¼Îµ Ï€Î¹ÎºÎ¬Î½Ï„Î¹ÎºÎ· ÏƒÎ¬Î»Ï„ÏƒÎ± Î½Ï„Î¿Î¼Î¬Ï„Î±Ï‚, ÏƒÎºÏŒÏÎ´Î¿ ÎºÎ±Î¹ Ï†ÏÎ­ÏƒÎºÎ¿ Î²Î±ÏƒÎ¹Î»Î¹ÎºÏŒ'
                    }
                ]
            }
        ];

        categories.forEach(category => {
            const categoryContainer = $('<div>').css({
                'cursor': 'pointer',
                'transition': 'all 0.3s ease'
            });

            const categoryHeader = $('<div>').css({
                'padding': '15px',
                'background-color': '#9A7E6F',
                'color': 'white',
                'border-radius': '8px',
                'font-weight': 'bold',
                'font-size': '18px',
                'margin-bottom': '10px',
                'display': 'flex',
                'justify-content': 'space-between',
                'align-items': 'center'
            }).text(category.name);

            const itemsList = $('<div>').css({
                'padding-left': '20px',
                'display': 'none',
                'max-height': '300px',
                'overflow-y': 'auto',
                'margin-bottom': '15px',
                'scrollbar-width': 'thin',
                'scrollbar-color': '#9A7E6F transparent'
            }).addClass('menu-items-list');

            category.items.forEach(item => {
                const itemElement = $('<div>').css({
                    'padding': '15px',
                    'border-bottom': '1px solid #eee',
                    'color': '#54473F',
                    'display': 'flex',
                    'align-items': 'start',
                    'gap': '15px',
                    'background-color': 'white'
                });

                const itemImage = $('<img>').attr({
                    'src': item.image,
                    'alt': item.name
                }).css({
                    'width': '80px',
                    'height': '80px',
                    'object-fit': 'cover',
                    'border-radius': '8px'
                });

                const itemInfo = $('<div>').css({
                    'flex-grow': '1',
                    'display': 'flex',
                    'flex-direction': 'column',
                    'gap': '5px'
                });

                const itemHeader = $('<div>').css({
                    'display': 'flex',
                    'justify-content': 'space-between',
                    'align-items': 'center'
                });

                const itemName = $('<div>').text(item.name).css({
                    'font-weight': 'bold',
                    'font-size': '16px'
                });

                const itemDescription = $('<div>').text(item.description).css({
                    'color': '#666',
                    'font-size': '14px'
                });

                const addButton = $('<button>').text('+ Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ·').css({
                    'background-color': '#4CAF50',
                    'color': 'white',
                    'border': 'none',
                    'padding': '8px 15px',
                    'border-radius': '5px',
                    'cursor': 'pointer',
                    'margin-top': '10px',
                    'transition': 'background-color 0.3s ease'
                }).hover(
                    function() { $(this).css('background-color', '#45a049'); },
                    function() { $(this).css('background-color', '#4CAF50'); }
                );

                addButton.click(function(e) {
                    e.stopPropagation();
                    addItemToOrder(item);
                    updateOrderPanel();
                });

                itemHeader.append(itemName);
                itemInfo.append(itemHeader, itemDescription, addButton);
                itemElement.append(itemImage, itemInfo);
                itemsList.append(itemElement);
            });

            categoryHeader.click(function() {
                itemsList.slideToggle(300);
                $('.menu-items-list').not(itemsList).slideUp(300);
            });

            categoryContainer.append(categoryHeader, itemsList);
            menuList.append(categoryContainer);
        });

        leftPanel.append(menuList);

        // Right Panel
        const rightPanel = $('<div>').css({
            'background-color': 'white',
            'border-radius': '15px',
            'padding': '20px',
            'box-shadow': '0 4px 6px rgba(0, 0, 0, 0.1)',
            'display': 'flex',
            'flex-direction': 'column',
            'height': '100%'
        });

        const orderTitle = $('<h3>').text('Î— Î Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î± ÏƒÎ±Ï‚').css({
            'margin': '0 0 20px 0',
            'color': '#54473F',
            'font-size': '24px'
        });

        const orderItemsContainer = $('<div>').css({
            'flex-grow': '1',
            'overflow-y': 'auto',
            'margin-bottom': '20px'
        }).attr('id', 'orderItemsContainer');

        const orderSummaryContainer = $('<div>').css({
            'border-top': '2px solid #eee',
            'padding-top': '20px',
            'margin-top': 'auto'
        });

        const submitButton = $('<button>').text('Î‘Ï€Î¿ÏƒÏ„Î¿Î»Î® Î Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î±Ï‚').css({
            'width': '100%',
            'padding': '15px',
            'background-color': '#4CAF50',
            'color': 'white',
            'border': 'none',
            'border-radius': '8px',
            'font-size': '18px',
            'font-weight': 'bold',
            'cursor': 'pointer',
            'transition': 'background-color 0.3s ease'
        }).hover(
            function() { $(this).css('background-color', '#45a049'); },
            function() { $(this).css('background-color', '#4CAF50'); }
        ).click(function() {
            if (selectedItems.length > 0) {
                showMessage('Î— Ï€Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î± ÏƒÎ±Ï‚ ÏƒÏ„Î¬Î»Î¸Î·ÎºÎµ ÎµÏ€Î¹Ï„Ï…Ï‡ÏÏ‚!');
                selectedItems = [];
                updateOrderPanel();
            } else {
                showMessage('Î Î±ÏÎ±ÎºÎ±Î»Ï ÎµÏ€Î¹Î»Î­Î¾Ï„Îµ Ï„Î¿Ï…Î»Î¬Ï‡Î¹ÏƒÏ„Î¿Î½ Î­Î½Î± Ï€ÏÎ¿ÏŠÏŒÎ½');
            }
        });

        orderSummaryContainer.append(submitButton);
        rightPanel.append(orderTitle, orderItemsContainer, orderSummaryContainer);
        
        panelsContainer.append(leftPanel, rightPanel);
        windowContainer.append(panelsContainer);
        $(".container").append(windowContainer);

        updateOrderPanel();
    }

    function showEvents() {
        $(".container").empty();
        const windowContainer = $('<div>').css({
            'width': '100%',
            'height': '100%',
            'padding': '2rem',
            'display': 'flex',
            'flex-direction': 'column',
            'gap': '20px',
            'box-sizing': 'border-box'
        });

        // Header
        const header = $('<div>').css({
            'display': 'flex',
            'align-items': 'center',
            'gap': '20px',
            'padding': '10px 0',
            'box-sizing': 'border-box'
        });

        const backButton = $('<button>')
            .text('â†')
            .css({
                'background-color': '#9A7E6F',
                'color': 'white',
                'padding': '10px 20px',
                'border-radius': '8px',
                'font-size': '24px',
                'font-weight': 'bold',
                'cursor': 'pointer',
                'transition': 'background-color 0.3s ease',
                'border': 'none'
            })
            .hover(
                function() { $(this).css('background-color', '#826a5d'); },
                function() { $(this).css('background-color', '#9A7E6F'); }
            )
            .click(function() {
                createSubWindow('Î•Ï€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î¯Î± ÎœÎµ Î¥Ï€Î±Î»Î»Î®Î»Î¿Ï…Ï‚');
            });

        const windowTitle = $('<h2>')
            .text('Î ÏÎ¿ÏƒÎµÏ‡ÎµÎ¯Ï‚ Î•ÎºÎ´Î·Î»ÏÏƒÎµÎ¹Ï‚')
            .css({
                'font-size': '32px',
                'color': '#54473F',
                'margin': '0'
            });

        header.append(backButton, windowTitle);

        // Main content container
        const contentContainer = $('<div>').css({
            'display': 'flex',
            'gap': '30px',
            'flex': '1',
            'background-color': 'white',
            'border-radius': '15px',
            'padding': '20px',
            'box-shadow': '0 4px 6px rgba(0, 0, 0, 0.1)',
            'box-sizing': 'border-box',
            'min-height': '0'
        });

        // Events list on the left
        const eventsList = $('<div>').css({
            'width': '25%',
            'display': 'flex',
            'flex-direction': 'column',
            'gap': '15px',
            'padding-right': '15px',
            'border-right': '1px solid #eee',
            'overflow-y': 'auto',
            'box-sizing': 'border-box'
        });

        // Featured event on the right
        const featuredEvent = $('<div>').css({
            'width': '75%',
            'position': 'relative',
            'border-radius': '12px',
            'overflow': 'hidden',
            'box-sizing': 'border-box',
            'display': 'flex',
            'flex-direction': 'column'
        });

        const events = [
            {
                id: 1,
                title: 'Î£Ï…Î½Î±Ï…Î»Î¯Î±',
                date: '15 Î™Î¿Ï…Î»Î¯Î¿Ï… 2024',
                time: '21:00',
                image: 'concert.png',
                description: 'ÎœÎ¹Î± Î¼Î±Î³Î¹ÎºÎ® Î²ÏÎ±Î´Î¹Î¬ Î¼Îµ Î¶Ï‰Î½Ï„Î±Î½Î® Î¼Î¿Ï…ÏƒÎ¹ÎºÎ® ÎºÎ¬Ï„Ï‰ Î±Ï€ÏŒ Ï„Î± Î±ÏƒÏ„Î­ÏÎ¹Î±.'
            },
            {
                id: 2,
                title: 'Î ÏÏ‰Ï„Î¬Î¸Î»Î·Î¼Î± Î£ÎºÎ±ÎºÎ¹Î¿Ï',
                date: '20 Î™Î¿Ï…Î»Î¯Î¿Ï… 2024',
                time: '10:00',
                image: 'chess.png',
                description: 'Î”Î¹Î®Î¼ÎµÏÎ¿ Ï„Î¿Ï…ÏÎ½Î¿Ï…Î¬ ÏƒÎºÎ±ÎºÎ¹Î¿Ï Î¼Îµ ÏƒÏ…Î¼Î¼ÎµÏ„Î¿Ï‡Î­Ï‚ Î±Ï€ÏŒ ÏŒÎ»Î· Ï„Î·Î½ Î•Î»Î»Î¬Î´Î±.'
            },
            {
                id: 3,
                title: 'Î¤Î¿Ï…ÏÎ½Î¿Ï…Î¬ ÎœÏ€Î¬ÏƒÎºÎµÏ„',
                date: '25 Î™Î¿Ï…Î»Î¯Î¿Ï… 2024',
                time: '17:00',
                image: 'basketball.png',
                description: 'Î¦Î¹Î»Î¹ÎºÏŒÏ‚ Î±Î³ÏÎ½Î±Ï‚ Î¼Ï€Î¬ÏƒÎºÎµÏ„ Î¼ÎµÏ„Î±Î¾Ï Ï„Ï‰Î½ Î¿Î¼Î¬Î´Ï‰Î½ Ï„Î·Ï‚ Ï€ÎµÏÎ¹Î¿Ï‡Î®Ï‚.'
            }
        ];

        // Create event cards
        events.forEach((event, index) => {
            const eventCard = $('<div>').css({
                'background-color': index === 0 ? '#9A7E6F' : '#f3f4f6',
                'color': index === 0 ? 'white' : '#333',
                'border-radius': '12px',
                'padding': '20px',
                'cursor': 'pointer',
                'transition': 'all 0.3s ease',
                'box-sizing': 'border-box'
            }).addClass('event-card');

            const title = $('<div>').text(event.title).css({
                'font-size': '20px',
                'font-weight': 'bold',
                'margin-bottom': '10px'
            });

            const dateTime = $('<div>').text(`${event.date}, ${event.time}`).css({
                'font-size': '16px',
                'opacity': '0.9'
            });

            eventCard.append(title, dateTime);

            eventCard.click(function() {
                $('.event-card').css({
                    'background-color': '#f3f4f6',
                    'color': '#333'
                });
                $(this).css({
                    'background-color': '#9A7E6F',
                    'color': 'white'
                });
                updateFeaturedEvent(event);
            });

            eventsList.append(eventCard);
        });

        function updateFeaturedEvent(event) {
            featuredEvent.empty();
            
            const imageContainer = $('<div>').css({
                'flex': '1',
                'display': 'flex',
                'justify-content': 'center',
                'align-items': 'center',
                'background-color': '#f8f9fa',
                'overflow': 'hidden',
                'position': 'relative',
                'box-sizing': 'border-box'
            });
            
            const featuredImage = $('<img>').attr({
                'src': event.image,
                'alt': event.title
            }).css({
                'max-width': '100%',
                'max-height': '100%',
                'object-fit': 'contain'
            });

            const infoOverlay = $('<div>').css({
                'position': 'absolute',
                'bottom': '0',
                'left': '0',
                'right': '0',
                'background': 'linear-gradient(transparent, rgba(0,0,0,0.8))',
                'color': 'white',
                'padding': '30px',
                'box-sizing': 'border-box'
            });

            const title = $('<div>').text(event.title).css({
                'font-size': '28px',
                'font-weight': 'bold',
                'margin-bottom': '15px'
            });

            const dateTime = $('<div>').text(`${event.date}, ${event.time}`).css({
                'font-size': '18px',
                'margin-bottom': '10px',
                'opacity': '0.9'
            });

            const description = $('<div>').text(event.description).css({
                'font-size': '16px',
                'opacity': '0.9',
                'line-height': '1.5'
            });

            infoOverlay.append(title, dateTime, description);
            imageContainer.append(featuredImage, infoOverlay);
            featuredEvent.append(imageContainer);
        }

        // Set initial featured event
        updateFeaturedEvent(events[0]);

        contentContainer.append(eventsList, featuredEvent);
        windowContainer.append(header, contentContainer);
        $(".container").append(windowContainer);
    }

    function addItemToOrder(item) {
        const existingItem = selectedItems.find(i => i.name === item.name);
        if (existingItem) {
            existingItem.quantity += 1;
        } else {
            selectedItems.push({
                ...item,
                quantity: 1
            });
        }
    }

    function removeItemFromOrder(itemName) {
        const item = selectedItems.find(i => i.name === itemName);
        if (item) {
            selectedItems = selectedItems.filter(i => i.name !== itemName);
        }
        updateOrderPanel();
    }

    function updateItemQuantity(itemName, newQuantity) {
        const item = selectedItems.find(i => i.name === itemName);
        if (item) {
            item.quantity = newQuantity;
            if (item.quantity <= 0) {
                removeItemFromOrder(itemName);
            } else {
                updateOrderPanel();
            }
        }
    }

    function updateOrderPanel() {
        const container = $('#orderItemsContainer');
        container.empty();

        if (selectedItems.length === 0) {
            container.append(
                $('<div>').text('Î”ÎµÎ½ Î­Ï‡ÎµÏ„Îµ ÎµÏ€Î¹Î»Î­Î¾ÎµÎ¹ Ï€ÏÎ¿ÏŠÏŒÎ½Ï„Î±').css({
                    'text-align': 'center',
                    'color': '#666',
                    'padding': '20px',
                    'font-style': 'italic'
                })
            );
        } else {
            selectedItems.forEach(item => {
                const itemElement = $('<div>').css({
                    'display': 'flex',
                    'justify-content': 'space-between',
                    'align-items': 'center',
                    'padding': '15px',
                    'border-bottom': '1px solid #eee',
                    'gap': '10px'
                });

                // Left side - Item info
                const itemInfo = $('<div>').css({
                    'display': 'flex',
                    'align-items': 'center',
                    'gap': '15px'
                });

                const itemImage = $('<img>').attr({
                    'src': item.image,
                    'alt': item.name
                }).css({
                    'width': '50px',
                    'height': '50px',
                    'object-fit': 'cover',
                    'border-radius': '6px'
                });

                const itemDetails = $('<div>').css({
                    'display': 'flex',
                    'flex-direction': 'column',
                    'gap': '5px'
                });

                const itemName = $('<div>').text(item.name).css({
                    'font-weight': 'bold',
                    'color': '#54473F'
                });

                const itemDescription = $('<div>').text(item.description).css({
                    'font-size': '12px',
                    'color': '#666',
                    'max-width': '200px',
                    'white-space': 'nowrap',
                    'overflow': 'hidden',
                    'text-overflow': 'ellipsis'
                });

                itemDetails.append(itemName, itemDescription);
                itemInfo.append(itemImage, itemDetails);

                // Right side - Quantity controls
                const controls = $('<div>').css({
                    'display': 'flex',
                    'align-items': 'center',
                    'gap': '10px'
                });

                const decreaseButton = $('<button>').text('-').css({
                    'width': '30px',
                    'height': '30px',
                    'border-radius': '50%',
                    'border': 'none',
                    'background-color': '#f5f5f5',
                    'cursor': 'pointer',
                    'font-weight': 'bold',
                    'color': '#54473F'
                }).click(() => updateItemQuantity(item.name, item.quantity - 1));

                const quantity = $('<span>').text(item.quantity).css({
                    'font-weight': 'bold',
                    'color': '#54473F',
                    'min-width': '30px',
                    'text-align': 'center'
                });

                const increaseButton = $('<button>').text('+').css({
                    'width': '30px',
                    'height': '30px',
                    'border-radius': '50%',
                    'border': 'none',
                    'background-color': '#4CAF50',
                    'color': 'white',
                    'cursor': 'pointer',
                    'font-weight': 'bold'
                }).click(() => updateItemQuantity(item.name, item.quantity + 1));

                const removeButton = $('<button>')
                    .html('&times;')
                    .css({
                        'background': 'none',
                        'border': 'none',
                        'color': '#FF5252',
                        'font-size': '20px',
                        'cursor': 'pointer',
                        'padding': '0 10px',
                        'margin-left': '10px'
                    })
                    .click(() => removeItemFromOrder(item.name));

                controls.append(decreaseButton, quantity, increaseButton, removeButton);

                itemElement.append(itemInfo, controls);
                container.append(itemElement);
            });

            // Add order summary below items
            const summaryContainer = $('<div>').css({
                'margin-top': '20px',
                'padding': '15px',
                'border-top': '2px solid #eee',
                'display': 'flex',
                'flex-direction': 'column',
                'gap': '10px'
            });

            // Calculate totals
            const totalQuantity = selectedItems.reduce((sum, item) => sum + item.quantity, 0);
            
            // Summary title
            const summaryTitle = $('<div>').text('Î£ÏÎ½Î¿ÏˆÎ· Î Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î±Ï‚').css({
                'font-weight': 'bold',
                'color': '#54473F',
                'font-size': '16px',
                'margin-bottom': '10px'
            });

            // Items count
            const itemsCount = $('<div>').text(`Î£Ï…Î½Î¿Î»Î¹ÎºÎ¬ Ï„ÎµÎ¼Î¬Ï‡Î¹Î±: ${totalQuantity}`).css({
                'color': '#666'
            });

            summaryContainer.append(summaryTitle, itemsCount);
            container.append(summaryContainer);
        }
    }

    function touristNavigation(contentArea) {

        showMessage('Î‘Î½Î±ÎºÎ±Î»ÏÏˆÏ„Îµ ÏƒÎ·Î¼ÎµÎ¯Î± ÎµÎ½Î´Î¹Î±Ï†Î­ÏÎ¿Î½Ï„Î¿Ï‚ ÏƒÏ„Î·Î½ Ï€ÎµÏÎ¹Î¿Ï‡Î® ÎºÎ±Î¹ Î´ÎµÎ¯Ï„Îµ Ï†Ï‰Ï„Î¿Î³ÏÎ±Ï†Î¯ÎµÏ‚ Î±Ï€ÏŒ Ï„Î± Î±Î¾Î¹Î¿Î¸Î­Î±Ï„Î± Ï€Î¿Ï… Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± ÎµÏ€Î¹ÏƒÎºÎµÏ†Î¸ÎµÎ¯Ï„Îµ.');

        contentArea.css({
            'background-image': 'url("map2.jpg")',
            'background-size': 'cover',
            'background-position': 'center',
            'width': '100%',
            'height': '100%',
            'z-index': '1',
            'position': 'relative',
            'padding': '0px'
        });

        const gridDiv = $('<div>').addClass('gridDiv');

        // Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± modal Î³Î¹Î± Ï„Î¹Ï‚ Ï†Ï‰Ï„Î¿Î³ÏÎ±Ï†Î¯ÎµÏ‚
        const imageModal = $('<div>').css({
            'display': 'none',
            'position': 'fixed',
            'top': '0',
            'left': '0',
            'width': '100%',
            'height': '100%',
            'background-color': 'rgba(0, 0, 0, 0.8)',
            'z-index': '1001',
            'justify-content': 'center',
            'align-items': 'center'
        }).click(function() {
            $(this).fadeOut(300);
        });

        const modalContent = $('<div>').css({
            'max-width': '80%',
            'max-height': '80%',
            'position': 'relative'
        });

        const modalImage = $('<img>').css({
            'max-width': '100%',
            'max-height': '80vh',
            'object-fit': 'contain',
            'border-radius': '8px'
        });

        modalContent.append(modalImage);
        imageModal.append(modalContent);
        $('body').append(imageModal);

        if(firstTime){            
            firstTime = false;
            temp = tentLocation.toString();
            availableShelterLocations = possibleShelterLocations.filter(loc => loc !== temp);
            shelterLocation = availableShelterLocations[Math.floor(Math.random() * availableShelterLocations.length)];
        }

        for (let i = 1; i <= 3; i++) {
            for(let j = 1; j <= 3; j++){
                let tempDiv = $('<div>').attr('id', `area${i}${j}`).css({
                    'position': 'relative',
                    'transition': 'border 0.3s ease',
                    'cursor': 'pointer'
                });

                const areaId = i.toString() + j.toString();

                // Info box Î³Î¹Î± Ï„Î¿ hover
                const infoBox = $('<div>').css({
                    'display': 'none',
                    'position': 'absolute',
                    'top': '50%',
                    'left': '50%',
                    'transform': 'translate(-50%, -50%)',
                    'background-color': 'rgba(84, 71, 63, 0.9)',
                    'color': 'white',
                    'padding': '10px 20px',
                    'border-radius': '8px',
                    'z-index': '1000',
                    'white-space': 'nowrap',
                    'font-size': '16px',
                    'text-align': 'center'
                });

                // Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Ï„Î¿Ï… ÎºÎµÎ¹Î¼Î­Î½Î¿Ï… ÎºÎ±Î¹ Î¿ÏÎ¹ÏƒÎ¼ÏŒÏ‚ Ï„Î·Ï‚ ÎµÎ¹ÎºÏŒÎ½Î±Ï‚ Î³Î¹Î± ÎºÎ¬Î¸Îµ Ï€ÎµÏÎ¹Î¿Ï‡Î®
                let imageSrc;
                if(areaId === tentLocation) {
                    infoBox.text('Î•Î´Ï Î²ÏÎ¯ÏƒÎºÎµÏ„Î±Î¹ Î· ÏƒÎºÎ·Î½Î® ÏƒÎ±Ï‚');
                    // Add tent image
                    const tentImage = $('<img>').attr({
                        'src': 'topdownTent3.png',
                        'alt': 'Tent'
                    }).css({
                        'width': '100px',
                        'height': '100px',
                        'position': 'absolute',
                        'top': '50%',
                        'left': '50%',
                        'transform': 'translate(-50%, -50%)',
                        'object-fit': 'contain',
                        'z-index': '2'
                    });
                    tempDiv.append(tentImage);
                } else if(areaId === shelterLocation) {
                    infoBox.text('Î•Î´Ï Î²ÏÎ¯ÏƒÎºÎµÏ„Î±Î¹ Ï„Î¿ ÎºÎ±Ï„Î±Ï†ÏÎ³Î¹Î¿');
                    // Add shelter image
                    const shelterImage = $('<img>').attr({
                        'src': 'shelter2.png',
                        'alt': 'Shelter'
                    }).css({
                        'width': '100px',
                        'height': '100px',
                        'position': 'absolute',
                        'top': '50%',
                        'left': '50%',
                        'transform': 'translate(-50%, -50%)',
                        'object-fit': 'contain',
                        'z-index': '2'
                    });
                    tempDiv.append(shelterImage);
                } else {
                    switch(areaId) {
                        case '11':
                            infoBox.text('ÎŸÏÎµÎ¹Î²Î±Ï„Î¹ÎºÏŒ ÎœÎ¿Î½Î¿Ï€Î¬Ï„Î¹ Î£Ï„Î¿ Î’Î¿Ï…Î½ÏŒ');
                            imageSrc = 'mountainTrail.jfif';
                            break;
                        case '12':
                            infoBox.text('ÎœÎ¿Î½Î¿Ï€Î¬Ï„Î¹ Î ÎµÎ¶Î¿Ï€Î¿ÏÎ¯Î±Ï‚');
                            imageSrc = 'hickingTrail.jfif';
                            break;
                        case '13':
                            infoBox.text('Î‘Î¼Î¼ÏŒÎ»Î¿Ï†Î¿Î¹');
                            imageSrc = 'sandDunes.jfif';
                            break;
                        case '21':
                            infoBox.text('ÎšÎ±Ï†ÎµÏ„Î­ÏÎ¹Î± Î£Ï„Î·Î½ ÎšÎ¿ÏÏ…Ï†Î® Î¤Î¿Ï… Î’Î¿Ï…Î½Î¿Ï');
                            imageSrc = 'mountainCafe.jfif';
                            break;
                        case '22':
                            infoBox.text('Î™Î´Î±Î½Î¹ÎºÏŒ ÎœÎ­ÏÎ¿Ï‚ Î“Î¹Î± ÎœÏ€Î¬Î½Î¹Î¿ Î£Ï„Î¿ Î Î¿Ï„Î¬Î¼Î¹');
                            imageSrc = 'riverSwim.jfif';
                            break;
                        case '23':
                            infoBox.text('Î ÎµÏÎ¯Ï€Î±Ï„Î¿Ï‚ Î£Ï„Î· Î–Î¿ÏÎ³ÎºÎ»Î±');
                            imageSrc = 'jungle.jpeg';
                            break;
                        case '31':
                            infoBox.text('Î§Î¹Î¿Î½Î¿Î´ÏÎ¿Î¼Î¹ÎºÏŒ ÎšÎ­Î½Ï„ÏÎ¿');
                            imageSrc = 'skiResort.jfif';
                            break;
                        case '32':
                            infoBox.text('Î™Î´Î±Î½Î¹ÎºÏŒ ÎœÎ­ÏÎ¿Ï‚ Î“Î¹Î± Î¦Ï‰Ï„Î¿Î³ÏÎ±Ï†Î¯ÎµÏ‚ Î£Ï„Î¿ Î¦Î±ÏÎ¬Î³Î³Î¹');
                            imageSrc = 'canyon.jfif';
                            break;
                        case '33':
                            infoBox.text('Î‘ÏÏ‡Î±Î¯Î¿ ÎœÎ½Î·Î¼ÎµÎ¯Î¿');
                            imageSrc = 'monument.jfif';
                            break;
                    }
                }

                tempDiv.append(infoBox);

                // Hover effects
                tempDiv.hover(
                    function() {
                        $(this).css('border', '10px solid rgb(84, 71, 63)');
                        $(this).find(infoBox).fadeIn(300);
                    },
                    function() {
                        $(this).css('border', 'none');
                        $(this).find(infoBox).fadeOut(300);
                    }
                );

                // Click event Î³Î¹Î± ÎµÎ¼Ï†Î¬Î½Î¹ÏƒÎ· Ï†Ï‰Ï„Î¿Î³ÏÎ±Ï†Î¯Î±Ï‚
                if(imageSrc) {
                    tempDiv.click(function(e) {
                        e.stopPropagation();
                        modalImage.attr('src', imageSrc);
                        imageModal.css('display', 'flex').hide().fadeIn(300);
                    });
                }

                gridDiv.append(tempDiv);
            }
        }

        contentArea.append(gridDiv);
    }

    function showOutdoorView(contentArea) {
        showMessage('Î”ÎµÎ¯Ï„Îµ ÏƒÎµ Ï€ÏÎ±Î³Î¼Î±Ï„Î¹ÎºÏŒ Ï‡ÏÏŒÎ½Î¿ Ï„Î·Î½ ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ· Ï„Î¿Ï… Ï€ÎµÏÎ¹Î²Î¬Î»Î»Î¿Î½Ï„Î± Ï‡ÏÏÎ¿Ï… Ï„Î·Ï‚ ÏƒÎºÎ·Î½Î®Ï‚ ÏƒÎ±Ï‚ ÎºÎ±Î¹ ÎµÎ»Î­Î³Î¾Ï„Îµ Î³Î¹Î± Ï„Ï…Ï‡ÏŒÎ½ ÎµÏ€Î¹ÏƒÎºÎ­Ï€Ï„ÎµÏ‚.');

        const views = [
            { name: 'Î•ÏƒÏ‰Ï„ÎµÏÎ¹ÎºÎ¬', image: 'insideviewTent.png', desc: 'Î•ÏƒÏ‰Ï„ÎµÏÎ¹ÎºÎ® Î˜Î­Î±' },
            { name: 'ÎœÏ€ÏÎ¿ÏƒÏ„Î¬', image: 'frontviewTent.png', desc: 'ÎœÏ€ÏÎ¿ÏƒÏ„Î¹Î½Î® Î˜Î­Î±' },
            { name: 'Î”ÎµÎ¾Î¹Î¬', image: 'sideviewTent.png', desc: 'Î”ÎµÎ¾Î¹Î¬ Î˜Î­Î±' },
            { name: 'Î Î¯ÏƒÏ‰', image: 'backviewTent.png', desc: 'Î Î¯ÏƒÏ‰ Î˜Î­Î±' },
            { name: 'Î‘ÏÎ¹ÏƒÏ„ÎµÏÎ¬', image: 'canyon.jfif', desc: 'Î‘ÏÎ¹ÏƒÏ„ÎµÏÎ® Î˜Î­Î±' }
        ];

        let currentIndex = 0;

        // Create the main slideshow container
        const slideshowContainer = $('<div>').css({
            'width': '98%',
            'max-height': '100%',
            'display': 'flex',
            'flex-direction': 'column',
            'align-items': 'center',
            'gap': '15px',
            'padding': '15px',
            'background-color': 'white',
            'border-radius': '15px',
            'box-shadow': '0 4px 6px rgba(0, 0, 0, 0.1)',
            'overflow': 'hidden'
        });

        // Create image container
        const imageContainer = $('<div>').css({
            'position': 'relative',
            'width': '80%',
            'height': '450px', // Reduced height to fit within container
            'border-radius': '12px',
            'overflow': 'hidden',
            'background-color': 'rgba(154, 126, 111, 0.1)',
            'display': 'flex',
            'justify-content': 'center',
            'align-items': 'center'
        });

        // Create image element
        const image = $('<img>').attr({
            'src': views[0].image,
            'alt': views[0].desc
        }).css({
            'max-width': '100%',
            'max-height': '100%',
            'object-fit': 'contain',
            'border-radius': '12px'
        });

        // Create description
        const description = $('<div>').text(views[0].desc).css({
            'font-size': '20px', // Slightly reduced font size
            'color': '#54473F',
            'text-align': 'center',
            'padding': '5px',
            'font-weight': 'bold'
        });

        // Create navigation dots
        const navigation = $('<div>').css({
            'display': 'flex',
            'gap': '10px',
            'justify-content': 'center',
            'margin-top': '10px',
            'margin-bottom': '5px' // Added bottom margin
        });

        // Create navigation buttons
        const createNavButton = (text, position) => {
            return $('<button>').text(text).css({
                'position': 'absolute',
                [position]: '20px',
                'top': '50%',
                'transform': 'translateY(-50%)',
                'background-color': 'rgba(154, 126, 111, 0.8)',
                'color': 'white',
                'border': 'none',
                'padding': '12px 20px', // Slightly reduced padding
                'border-radius': '8px',
                'cursor': 'pointer',
                'font-size': '18px', // Slightly reduced font size
                'transition': 'background-color 0.3s ease',
                'z-index': '2'
            }).hover(
                function() { $(this).css('background-color', 'rgba(130, 106, 93, 0.8)'); },
                function() { $(this).css('background-color', 'rgba(154, 126, 111, 0.8)'); }
            );
        };

        const prevButton = createNavButton('â†', 'left');
        const nextButton = createNavButton('â†’', 'right');

        // Create navigation dots
        views.forEach((_, index) => {
            const dot = $('<button>').css({
                'width': '12px',
                'height': '12px',
                'border-radius': '50%',
                'border': 'none',
                'background-color': index === 0 ? '#9A7E6F' : '#D1D5DB',
                'cursor': 'pointer',
                'transition': 'background-color 0.3s ease'
            }).click(() => updateView(index));

            navigation.append(dot);
        });

        // Update view function
        function updateView(index) {
            currentIndex = index;
            image.fadeOut(300, function() {
                image.attr('src', views[index].image)
                    .fadeIn(300);
                description.text(views[index].desc);
                navigation.find('button').each((i, dot) => {
                    $(dot).css('background-color', i === index ? '#9A7E6F' : '#D1D5DB');
                });
            });
        }

        // Add click handlers for prev/next buttons
        prevButton.click(() => {
            updateView((currentIndex - 1 + views.length) % views.length);
        });

        nextButton.click(() => {
            updateView((currentIndex + 1) % views.length);
        });

        // Assemble the slideshow
        imageContainer.append(image, prevButton, nextButton);
        slideshowContainer.append(imageContainer, description, navigation);
        contentArea.empty().append(slideshowContainer);
    }

</script>

</body>
</html>
